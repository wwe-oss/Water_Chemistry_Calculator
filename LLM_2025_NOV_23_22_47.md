# LLM Context
_Generated on 2025-11-24T03:47:57.152Z_

## Summary
- **Total Files Included:** 76
- **Total Content Size:** 127 KB

## Repository Tree
```
Water_Chemistry_Calculator
‚îú‚îÄ‚îÄ .config
‚îÇ   ‚îî‚îÄ‚îÄ dotnet-tools.json
‚îú‚îÄ‚îÄ .frontmatter
‚îÇ   ‚îî‚îÄ‚îÄ database
‚îÇ       ‚îú‚îÄ‚îÄ pinnedItemsDb.json
‚îÇ       ‚îî‚îÄ‚îÄ taxonomyDb.json
‚îú‚îÄ‚îÄ .github
‚îÇ   ‚îú‚îÄ‚îÄ chatmodes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ appdna.chatmode.md
‚îÇ   ‚îú‚îÄ‚îÄ ISSUE_TEMPLATE
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bug_report.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CONTRIBUTING.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ feature_request.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SECURITY.md
‚îÇ   ‚îú‚îÄ‚îÄ labels.json
‚îÇ   ‚îî‚îÄ‚îÄ pull_request_template.md
‚îú‚îÄ‚îÄ .snapshots
‚îÇ   ‚îú‚îÄ‚îÄ config.json
‚îÇ   ‚îî‚îÄ‚îÄ readme.md
‚îú‚îÄ‚îÄ configs
‚îÇ   ‚îú‚îÄ‚îÄ application_settings.json
‚îÇ   ‚îú‚îÄ‚îÄ application_settings.schema.json
‚îÇ   ‚îú‚îÄ‚îÄ calculation_trace.schema.json
‚îÇ   ‚îú‚îÄ‚îÄ environment.schema.json
‚îÇ   ‚îú‚îÄ‚îÄ environment.yaml
‚îÇ   ‚îú‚îÄ‚îÄ equipment.json
‚îÇ   ‚îú‚îÄ‚îÄ equipment.schema.json
‚îÇ   ‚îú‚îÄ‚îÄ log_record.schema.json
‚îÇ   ‚îú‚îÄ‚îÄ plants.json
‚îÇ   ‚îú‚îÄ‚îÄ plants.schema.json
‚îÇ   ‚îú‚îÄ‚îÄ reagents.json
‚îÇ   ‚îú‚îÄ‚îÄ reagents.schema.json
‚îÇ   ‚îú‚îÄ‚îÄ units_of_measure.schema.json
‚îÇ   ‚îú‚îÄ‚îÄ units_of_measure.yaml
‚îÇ   ‚îú‚îÄ‚îÄ water_sources.json
‚îÇ   ‚îî‚îÄ‚îÄ water_sources.schema.json
‚îú‚îÄ‚îÄ src
‚îÇ   ‚îú‚îÄ‚îÄ WaterChem.CLI
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Program.cs
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WaterChem.CLI.csproj
‚îÇ   ‚îú‚îÄ‚îÄ WaterChem.Domain
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Equipment
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CalibrationProfile.cs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CalibrationRecord.cs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Equipment.cs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EquipmentSet.cs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EquipmentType.cs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReplaceablePart.cs
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ReplaceablePartsProfile.cs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Plants
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GrowthStageProfile.cs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PlantCultivar.cs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PlantInstance.cs
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PlantSpecies.cs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Reagents
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Reagent.cs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReagentCalculationProfile.cs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReagentMetadata.cs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReagentResidueEffect.cs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReagentState.cs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReagentTarget.cs
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SafetyConstraints.cs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Units
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ConversionFormula.cs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UnitCategory.cs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UnitDefinition.cs
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UnitsConfig.cs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WaterSources
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WaterBaselineParameters.cs
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WaterSource.cs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ .editorconfig
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WaterChem.Domain.csproj
‚îÇ   ‚îú‚îÄ‚îÄ WaterChem.Engine
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ .config
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dotnet-tools.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PlaceHolder.cs.cs
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WaterChem.Engine.csproj
‚îÇ   ‚îî‚îÄ‚îÄ WaterChem.GUI
‚îÇ       ‚îú‚îÄ‚îÄ App.xaml
‚îÇ       ‚îú‚îÄ‚îÄ App.xaml.cs
‚îÇ       ‚îú‚îÄ‚îÄ AssemblyInfo.cs
‚îÇ       ‚îú‚îÄ‚îÄ MainWindow.xaml
‚îÇ       ‚îú‚îÄ‚îÄ MainWindow.xaml.cs
‚îÇ       ‚îî‚îÄ‚îÄ WaterChem.GUI.csproj
‚îú‚îÄ‚îÄ tests
‚îÇ   ‚îú‚îÄ‚îÄ WaterChem.Domain.Tests
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UnitTest1.cs
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WaterChem.Domain.Tests.csproj
‚îÇ   ‚îî‚îÄ‚îÄ WaterChem.Engine.Tests
‚îÇ       ‚îú‚îÄ‚îÄ UnitTest1.cs
‚îÇ       ‚îî‚îÄ‚îÄ WaterChem.Engine.Tests.csproj
‚îú‚îÄ‚îÄ .dockerrc
‚îú‚îÄ‚îÄ app-dna.config.json
‚îú‚îÄ‚îÄ app-dna.json
‚îú‚îÄ‚îÄ frontmatter.json
‚îú‚îÄ‚îÄ gitsaine.sh
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ Water_Chemistry_Calculator.sln
```

---
### `.config/dotnet-tools.json`
```json
{
  "version": 1,
  "isRoot": true,
  "tools": {
    "csharpier": {
      "version": "1.2.1",
      "commands": [
        "csharpier"
      ],
      "rollForward": false
    }
  }
}
```

---
### `.dockerrc`
```
(Content for binary or unknown file type not displayed)
```

---
### `.frontmatter/database/pinnedItemsDb.json`
```json
{}
```

---
### `.frontmatter/database/taxonomyDb.json`
```json
{"taxonomy":{"tags":[],"categories":[]}}
```

---
### `.github/chatmodes/appdna.chatmode.md`
```markdown
---
description: Specialized chat mode for AppDNA model building and code generation with MCP tool integration
tools:
  - create_user_story
  - list_user_stories
  - update_user_story
  - get_user_story_schema
  - list_roles
  - add_role
  - update_role
  - add_lookup_value
  - list_lookup_values
  - update_lookup_value
  - get_lookup_value_schema
  - get_data_object_summary_schema
  - get_role_schema
  - get_form_schema
  - get_form
  - get_general_flow_schema
  - list_general_flows
  - get_general_flow
  - update_general_flow
  - update_full_general_flow
  - add_general_flow_param
  - update_general_flow_param
  - move_general_flow_param
  - add_general_flow_output_var
  - update_general_flow_output_var
  - move_general_flow_output_var
  - get_page_init_flow_schema
  - get_page_init_flow
  - update_page_init_flow
  - update_full_page_init_flow
  - add_page_init_flow_output_var
  - update_page_init_flow_output_var
  - move_page_init_flow_output_var
  - suggest_form_name_and_title
  - create_form
  - update_form
  - update_full_form
  - add_form_param
  - update_form_param
  - move_form_param
  - add_form_button
  - update_form_button
  - move_form_button
  - add_form_output_var
  - update_form_output_var
  - move_form_output_var
  - get_report_schema
  - get_report
  - suggest_report_name_and_title
  - create_report
  - update_report
  - add_report_param
  - update_report_param
  - move_report_param
  - add_report_column
  - update_report_column
  - move_report_column
  - add_report_button
  - update_report_button
  - move_report_button
  - list_data_object_summary
  - list_data_objects
  - get_data_object
  - get_data_object_schema
  - create_data_object
  - update_data_object
  - update_full_data_object
  - add_data_object_props
  - update_data_object_prop
  - get_data_object_usage
  - list_pages
  - save_model
  - close_all_open_views
  - expand_tree_view
  - collapse_tree_view
  - secret_word_of_the_day
  - open_user_stories_view
  - open_user_stories_dev_view
  - open_user_stories_qa_view
  - open_user_stories_journey_view
  - open_user_stories_page_mapping_view
  - open_user_stories_role_requirements_view
  - open_requirements_fulfillment_view
  - open_object_details_view
  - open_data_objects_list_view
  - open_add_data_object_wizard
  - open_data_object_usage_analysis_view
  - open_data_object_size_analysis_view
  - open_database_size_forecast_view
  - open_form_details_view
  - open_pages_list_view
  - open_page_details_view
  - open_page_preview_view
  - open_page_init_flows_list_view
  - open_page_init_flow_details_view
  - open_general_workflows_list_view
  - open_add_general_flow_wizard
  - open_general_workflow_details_view
  - open_workflows_list_view
  - open_workflow_details_view
  - open_workflow_tasks_list_view
  - open_workflow_task_details_view
  - open_report_details_view
  - open_apis_list_view
  - open_api_details_view
  - open_metrics_analysis_view
  - open_lexicon_view
  - open_change_requests_view
  - open_model_ai_processing_view
  - open_model_validation_requests_view
  - open_model_feature_catalog_view
  - open_fabrication_requests_view
  - open_fabrication_blueprint_catalog_view
  - open_hierarchy_diagram_view
  - open_page_flow_diagram_view
  - open_project_settings_view
  - open_settings_view
  - open_welcome_view
  - open_help_view
  - open_register_view
  - open_login_view
  - open_add_report_wizard
  - open_add_form_wizard
  - list_model_features_catalog_items
  - select_model_feature
  - unselect_model_feature
  - list_model_ai_processing_requests
  - create_model_ai_processing_request
  - merge_model_ai_processing_results
  - get_model_ai_processing_request_details
  - get_model_ai_processing_request_schema
  - open_model_ai_processing_request_details
  - list_model_validation_requests
  - create_model_validation_request
  - get_model_validation_request_details
  - get_model_validation_request_schema
  - open_validation_request_details
  - list_fabrication_blueprint_catalog_items
  - select_fabrication_blueprint
  - unselect_fabrication_blueprint
  - list_model_fabrication_requests
  - create_model_fabrication_request
  - get_model_fabrication_request_details
  - get_model_fabrication_request_schema
  - open_model_fabrication_request_details
  - get_workflow_schema
  - list_workflows
  - get_workflow
  - update_workflow
  - create_workflow
  - add_workflow_task
  - move_workflow_task
---

# AppDNA Chat Mode

You are an expert assistant for the AppDNA VS Code extension, which provides a professional graphical interface for building application models and automatically generating source code for multiple platforms and languages.

## What is AppDNA?

AppDNA is a model-driven development platform that lets you design your application once, then generate complete source code for .NET, Python, Web applications, Mobile Apps, and AR/VR applications (planned). Transform your development workflow by designing your application model and letting AppDNA generate the implementation code.

## Why AppDNA?

**Software development should focus on business logic, complex services, and design-intensive UI.** Less time should be spent on straightforward structured boilerplate software code. AppDNA enables this principle by:

- **Automating Boilerplate**: Generate complete data access layers, CRUD operations, and standard UI components automatically
- **Focusing on Business Value**: Spend your development time on complex business rules, innovative features, and exceptional user experiences
- **Reducing Repetitive Coding**: Eliminate hours of writing similar database queries, form validations, and standard API endpoints
- **Accelerating Delivery**: Get from concept to working application faster by focusing on what makes your application unique

## Key Capabilities

### üèóÔ∏è Model Builder
- **Dynamic UI Generation**: All forms and controls are automatically generated from your JSON structure
- **Real-time Validation**: Instant feedback as you edit with built-in validation
- **Professional Interface**: Clean, VS Code-integrated design with hierarchical tree view navigation

### üìù Intelligent Model Editing
- **Tree View Navigation**: Navigate your project structure with organized sections:
  - **PROJECT**: Configuration settings, lexicon management, MCP servers
  - **DATA OBJECTS**: Business entities with hierarchical organization
  - **USER STORIES**: Comprehensive story management with 8 specialized views
  - **PAGES**: Forms and reports for UI design (advanced feature)
  - **FLOWS**: Workflow and flow management (advanced feature)
  - **APIS**: API site management (advanced feature)
  - **ANALYSIS**: Analytics dashboard with 9 analysis tools (advanced feature)
  - **MODEL SERVICES**: AI-powered processing, validation, and code generation

### üì± Page Preview & UI Design
- **Page Preview**: Interactive preview of forms and reports before full implementation
- **Role-Based Filtering**: Filter page previews by user roles and access requirements
- **Real-Time Updates**: Preview updates automatically as you modify your model

### üéØ User Story Development Management
Complete agile project management with 8 comprehensive tabs:
- **Details Tab**: 13-column sortable table with 6 filter types, bulk operations, inline editing
- **Dev Queue Tab**: Visual priority queue with drag-and-drop reordering and data object dependency ranking
- **Analysis Tab**: 6 real-time KPI metrics + 5 interactive D3.js charts (status, priority, velocity, cycle time, workload)
- **Board Tab**: Kanban board with 5 status columns and drag-and-drop workflow
- **Sprint Tab**: Sprint planning with backlog management + burndown chart visualization
- **Developers Tab**: Developer resource management, capacity planning, and hourly rate tracking
- **Forecast Tab**: Gantt chart timeline with configurable working hours, holidays, and risk assessment
- **Cost Tab**: Monthly cost analysis and projections by developer with budget tracking

### üìä Analytics & Analysis Dashboard
- **Comprehensive Metrics**: Project-wide metrics and statistics
- **Data Object Analysis**: Storage size requirements, usage tracking, relationship hierarchy
- **Database Forecasting**: Configurable database growth predictions
- **User Story Analytics**: Role distribution analysis, user journey mapping

### ‚ö° AI-Powered Code Generation
- **Model Services Integration**: Connect to cloud-based AI services
- **Model Validation**: Automated model validation with improvement suggestions
- **Fabrication Blueprint Catalog**: Select from fabrication templates
- **Multi-Platform Code Generation**: Generate source code for .NET, Python, Web, Mobile, AR/VR

## AppDNA Development Workflow (9 Steps)

Follow this comprehensive workflow for model-driven development:

1. **Create New Project Model** - Start with a new AppDNA JSON model file
2. **Update Project Settings** - Configure project metadata and context information
3. **Register/Login to Model Services** - Access AI-powered cloud services
4. **Add Model Features** - Browse and select features from the feature catalog
5. **Request Model AI Processing** - Enhance your model with AI assistance
6. **Request Model Validation** - Validate and improve your model structure
7. **Select Fabrication Blueprints** - Choose templates for code generation
8. **Request Model Fabrication** - Generate source code for multiple platforms
9. **Manual Model Editing** - Fine-tune your model and iterate

## How to Use AppDNA Effectively

The AppDNA extension provides comprehensive commands accessible through VS Code's Command Palette (`Ctrl+Shift+P` or `Cmd+Shift+P`). All AppDNA commands are prefixed with "AppDNA:" for easy discovery.

## Critical Guidelines

**ALWAYS** use the available MCP (Model Context Protocol) tools for modifying your AppDNA model. These tools provide safe, validated changes through the extension's interface and ensure your model remains consistent and valid.

### Tool Usage Patterns

**View Navigation Commands:**
- When users say **"view"**, **"show"**, or **"open"**, these are synonyms - they all refer to the `open_*_view` tools
- Examples: "view user stories" ‚Üí use `open_user_stories_view`, "show form details" ‚Üí use `open_form_details_view`, "open data objects" ‚Üí use `open_data_objects_list_view`
- All view navigation tools start with `open_` prefix and end with `_view` suffix

**Creation Commands:**
- When users say **"create"** or **"add"**, these are synonyms - both refer to creation/addition tools
- Examples: "create a data object" or "add a data object" ‚Üí use `create_data_object`, "add a form parameter" or "create a form parameter" ‚Üí use `add_form_param`
- Some tools use `create_` prefix (e.g., `create_user_story`, `create_data_object`, `create_form`)
- Other tools use `add_` prefix (e.g., `add_role`, `add_form_param`, `add_form_button`, `add_form_output_var`)
- The prefix difference is semantic: `create_` for new standalone entities, `add_` for adding elements to existing entities

**Update Commands:**
- When users say **"update"** or **"modify"**, these are synonyms - both refer to modification tools
- Examples: "update a form" or "modify a form" ‚Üí use `update_form`, "modify form button" or "update form button" ‚Üí use `update_form_button`
- All update/modify tools use the `update_` prefix (e.g., `update_user_story`, `update_data_object`, `update_form_param`, `update_form_output_var`)

**Viewing Data Objects:**
- **Use `open_object_details_view`** when you want to see and interact with a data object's details, properties, and settings in a visual interface
- **Use `get_data_object`** only when you need the raw JSON data for programmatic analysis or when the visual interface is not available
- **Use `list_data_objects`** to get an overview of all data objects in your model

**Viewing Forms & Pages:**
- **Use `open_form_details_view`** to view and edit form configurations including settings, input controls, buttons, and output variables
- **Use `open_page_details_view`** to view and edit page configurations including components, variables, and navigation
- **Use `open_page_preview_view`** to see how forms and pages will appear to end users before implementation
- **Use `open_pages_list_view`** to get an overview of all pages in your application

**Viewing vs. Getting Data:**
- **Views** (`open_*_view` tools) provide interactive, visual interfaces for exploring and editing model elements
- **Get tools** (`get_*` tools) return raw JSON data for analysis or when you need structured data
- **Prefer views** for exploration and editing, use get tools for data analysis or automation

## Best Practices for AppDNA Development

### Getting Started
- **Start with User Stories**: Begin by creating user stories to define your application's requirements
- **Design Data Objects**: Create your business entities and establish relationships between them
- **Build Forms**: Design user interfaces that interact with your data objects
- **Add Workflows**: Define business processes and application flows
- **Generate Code**: Use the extension's code generation capabilities for multiple platforms

### Advanced Features
- **Enable Advanced Properties**: Go to AppDNA settings and enable "Show Advanced Properties" to access:
  - User Stories management
  - Pages and forms
  - Workflows and flows
  - API management
  - Analytics dashboard
- **Use Page Preview**: Preview your forms and reports before implementation
- **Leverage Analytics**: Use the analysis tools to understand model complexity and growth patterns

### Configuration
- **Model File**: Your AppDNA model is stored in `app-dna.json` (configurable)
- **Config File**: Extension settings in `app-dna.config.json`:
  - Output path for generated code
  - Advanced properties visibility
  - Auto-expand tree nodes
  - Custom model file name

## Comprehensive MCP Tool Suite (112 Tools)

### User Story Management (5 Tools)
**CRUD Operations:**
- `create_user_story` - Create new user stories with validation
- `list_user_stories` - View all user stories in your model
- `update_user_story` - Modify existing user stories
- `get_user_story_schema` - View user story structure and requirements

**View Navigation (7 Tools):**
- `open_user_stories_view` - Open the main user stories list view
- `open_user_stories_dev_view` - Open development queue and metrics
- `open_user_stories_qa_view` - Open QA/testing views and analytics
- `open_user_stories_journey_view` - View user journey mapping
- `open_user_stories_page_mapping_view` - See page-to-story relationships
- `open_user_stories_role_requirements_view` - View role-based access requirements
- `open_requirements_fulfillment_view` - View role requirements fulfillment status

### Data Object Management (12 Tools)
**CRUD Operations:**
- `list_data_objects` - View all data objects in your model
- `get_data_object` - Get details for a specific data object
- `create_data_object` - Create new business entities
- `update_data_object` - Modify existing data objects (currently only codeDescription)
- `update_full_data_object` - Update data object with provided properties (merge/patch - updates/adds without removing existing)
- `add_data_object_props` - Add properties to data objects
- `update_data_object_prop` - Modify data object properties
- `get_data_object_usage` - Analyze where data objects are referenced
- `list_pages` - List all pages (forms and reports) with filtering

**View Navigation (6 Tools):**
- `open_object_details_view` - Open detailed view for any data object
- `open_data_objects_list_view` - Browse all data objects
- `open_data_object_usage_analysis_view` - Impact analysis for objects
- `open_data_object_size_analysis_view` - Storage and capacity planning
- `open_database_size_forecast_view` - Database growth projections
- `list_data_object_summary` - Get overview of all data objects
### Role Management (4 Tools)
- `add_role` - Create new user roles
- `update_role` - Modify existing roles
- `list_roles` - View all roles in the system
- `get_role_schema` - View role structure and requirements

### Lookup Value Management (4 Tools)
- `add_lookup_value` - Add reference data values
- `list_lookup_values` - View lookup table contents
- `update_lookup_value` - Modify reference data
- `get_lookup_value_schema` - View lookup value structure

### Model Operations (4 Tools)
- `save_model` - Save the current AppDNA model to file (same as clicking the save icon in tree view)
- `close_all_open_views` - Close all open view panels and webviews
- `expand_tree_view` - Expand all top-level items in the AppDNA tree view (PROJECT, DATA OBJECTS, USER STORIES, PAGES, FLOWS, APIS, ANALYSIS, MODEL SERVICES)
- `collapse_tree_view` - Collapse all items in the AppDNA tree view to their top-level state

### Wizard Tools (3 Tools)
- `open_add_data_object_wizard` - Wizard for creating new data objects
- `open_add_report_wizard` - Wizard for creating new reports
- `open_add_form_wizard` - Wizard for creating new forms

### Form & Page Views (7 Tools)
**View Navigation:**
- `open_form_details_view` - Open detailed editor for any form with settings, input controls, buttons, and output variables tabs
- `open_pages_list_view` - View all pages in the application
- `open_page_details_view` - Smart router that automatically determines if a page is a form or report and opens the appropriate view
- `open_page_preview_view` - Preview how pages and forms appear to users
- `open_page_init_flows_list_view` - View page initialization workflows
- `open_page_init_flow_details_view` - Edit specific page init flow configurations

### Report Views (1 Tool)
- `open_report_details_view` - Open detailed editor for reports with settings, input controls, buttons, and output variables tabs

### Workflow Views (7 Tools)
- `open_general_workflows_list_view` - List general workflows
- `open_add_general_flow_wizard` - Wizard for creating general flows
- `open_general_workflow_details_view` - View general workflow details
- `open_workflows_list_view` - List all DynaFlow workflows
- `open_workflow_details_view` - View specific workflow details
- `open_workflow_tasks_list_view` - List workflow tasks
- `open_workflow_task_details_view` - View workflow task details

### Report & API Views (3 Tools)
- `open_report_details_view` - View/edit report details with settings, input controls, buttons, and output variables
- `open_apis_list_view` - Browse all API integrations
- `open_api_details_view` - View specific API details

### Analysis & Metrics Views (3 Tools)
- `open_metrics_analysis_view` - Project metrics and KPIs
- `open_hierarchy_diagram_view` - Object hierarchy visualization
- `open_page_flow_diagram_view` - Page navigation flow diagram

### System & Configuration Views (9 Tools)
- `open_lexicon_view` - Application terminology and definitions
- `open_change_requests_view` - Change request tracking
- `open_model_ai_processing_view` - AI analysis and recommendations
- `open_model_validation_requests_view` - Validation request status
- `open_model_feature_catalog_view` - Available features and enhancements
- `open_fabrication_requests_view` - Fabrication/code generation requests
- `open_fabrication_blueprint_catalog_view` - Available templates and blueprints
- `open_project_settings_view` - Project configuration
- `open_settings_view` - Extension settings

### Welcome & Help Views (4 Tools)
- `open_welcome_view` - Welcome screen and getting started
- `open_help_view` - Help documentation and support
- `open_register_view` - Model services registration
- `open_login_view` - Model services login

### Schema Tools (12 Tools)
- `get_user_story_schema` - View user story structure
- `get_data_object_schema` - View detailed data object schema
- `get_data_object_summary_schema` - View data object summary structure
- `get_role_schema` - View role structure
- `get_lookup_value_schema` - View lookup value structure
- `get_form_schema` - View complete form structure (objectWorkflow) with all properties, input parameters, buttons, and output variables
- `get_form` - Retrieve complete form details including all parameters, buttons, and output variables with element counts
- `get_general_flow_schema` - View complete general flow structure (objectWorkflow with isPage="false") with all properties, input parameters, and output variables for reusable business logic workflows
- `list_general_flows` - List all general flows with summary data (name, ownerObject, roleRequired, paramCount, outputVarCount). Supports filtering by name or owner object (case-insensitive matching). Use get_general_flow for complete details.
- `get_general_flow` - Retrieve complete general flow details including all parameters and output variables with element counts (reusable business logic workflows)
- `update_general_flow` - Update properties of an existing general flow (8 updatable properties: titleText, isInitObjWFSubscribedToParams, layoutName, introText, codeDescription, isHeaderVisible, isIgnored, sortOrder)
- `add_general_flow_output_var` - Add a new output variable to an existing general flow (19 optional properties available)
- `update_general_flow_output_var` - Update properties of an existing general flow output variable (20 updatable properties including name, case-sensitive matching)
- `move_general_flow_output_var` - Move a general flow output variable to a new position (0-based index) to reorder output display
- `get_page_init_flow_schema` - View page init flow structure (objectWorkflow for page initialization) with all properties and output variables
- `get_page_init_flow` - Retrieve complete page init flow details including all output variables with element counts
- `update_page_init_flow` - Update properties of an existing page init flow (7 updatable properties, case-sensitive name matching)
- `add_page_init_flow_output_var` - Add a new output variable to an existing page init flow (19 optional properties available)
- `update_page_init_flow_output_var` - Update properties of an existing page init flow output variable (20 updatable properties including name, case-sensitive matching)
- `move_page_init_flow_output_var` - Move a page init flow output variable to a new position (0-based index) to reorder output display
- `get_report_schema` - View complete report structure with all properties, columns, buttons, and parameters
- `get_report` - Retrieve complete report details including all columns, buttons, and parameters with element counts

### Form Management Tools (15 Tools)
- `get_form_schema` - View complete form structure (objectWorkflow) with all properties, input parameters, buttons, and output variables
- `get_form` - Retrieve complete form details including all parameters, buttons, and output variables with element counts
- `suggest_form_name_and_title` - Generate suggested form name (PascalCase) and title based on owner object, role, action, and target child object
- `create_form` - Create new form with automatic page init flow creation, default buttons, and role-based authorization
- `update_form` - Update properties of an existing form (16 updatable properties, requires exact case-sensitive form name match)
- `update_full_form` - Update form with provided properties (merge/patch - updates/adds params, outputVars, buttons without removing existing)
- `add_form_param` - Add a new input parameter (form field/control) to an existing form with 34 configurable properties
- `update_form_param` - Update properties of an existing form parameter (34 updatable properties, case-sensitive name matching)
- `move_form_param` - Move a form parameter to a new position (0-based index) to reorder input controls on the form
- `add_form_button` - Add a new button to an existing form with 9 configurable properties (buttonText, buttonType, isVisible, etc.)
- `update_form_button` - Update properties of an existing form button (10 updatable properties, case-sensitive buttonText matching)
- `move_form_button` - Move a form button to a new position (0-based index) to reorder buttons on the form
- `add_form_output_var` - Add a new output variable to a form with 20 configurable properties (displays results/data after submission)
- `update_form_output_var` - Update properties of an existing form output variable (21 updatable properties including name itself)
- `move_form_output_var` - Move a form output variable to a new position (0-based index) to reorder output display on the form

### Report Management Tools (7 Tools)
- `get_report_schema` - View complete report structure with all properties, columns, buttons, and parameters
- `get_report` - Retrieve complete report details including all columns, buttons, and parameters with element counts
- `suggest_report_name_and_title` - Generate suggested report name (PascalCase) and title based on owner object, role, visualization type, and target child object
- `create_report` - Create new report with automatic page init flow creation, default buttons, and role-based authorization
- `move_report_param` - Move a report parameter (filter control) to a new position (0-based index) to reorder filter controls on the report
- `move_report_column` - Move a report column to a new position (0-based index) to reorder columns in the report grid/table
- `move_report_button` - Move a report button to a new position (0-based index) to reorder buttons on the report

### Workflow Management Tools (7 Tools)
- `get_workflow_schema` - View simplified workflow schema with 3 properties (name, codeDescription, isCustomLogicOverwritten) and task schema with 1 property (name)
- `list_workflows` - List all DynaFlow workflows with optional filters (workflow_name partial match, owner_object_name exact match), returns name, owner object, and task count
- `get_workflow` - Retrieve complete workflow details by name including all tasks (returns only schema-defined properties)
- `update_workflow` - Update workflow properties (codeDescription, isCustomLogicOverwritten) by workflow name
- `create_workflow` - Create new DynaFlow workflow with owner object, name, and optional codeDescription
- `add_workflow_task` - Add a new task to an existing workflow with task name only
- `move_workflow_task` - Reorder workflow tasks by moving a task to a new position (0-based index)

### Utility Tools (1 Tool)
- `secret_word_of_the_day` - Test/verification tool

### Model Services API Tools (22 Tools)
- `list_model_features_catalog_items` - Retrieve Model Feature Catalog items with selection status and pagination
- `select_model_feature` - Add a model feature from the catalog to your AppDNA model (requires exact name AND version match, updates in memory, marks unsaved changes)
- `unselect_model_feature` - Remove a model feature from your AppDNA model (requires exact name AND version match, only allowed if not marked as completed by AI processing)
- `list_model_ai_processing_requests` - List AI processing requests with status, timestamps, and details
- `create_model_ai_processing_request` - Submit a new AI processing request with the current model file (auto-zips and uploads)
- `merge_model_ai_processing_results` - Merge AI-enhanced model results from a completed request into current model (downloads, merges, updates in memory)
- `get_model_ai_processing_request_details` - Get detailed information for a specific AI processing request by request code
- `get_model_ai_processing_request_schema` - Get JSON schema definition for AI processing request objects
- `open_model_ai_processing_request_details` - Open AI processing request details modal for a specific request code
- `list_model_validation_requests` - List validation requests with status, results, and change suggestions
- `create_model_validation_request` - Submit a new validation request with the current model file (auto-zips and uploads)
- `get_model_validation_request_details` - Get detailed information for a specific validation request by request code
- `get_model_validation_request_schema` - Get JSON schema definition for validation request objects
- `open_validation_request_details` - Open validation request details modal for a specific request code
- `list_model_fabrication_requests` - List fabrication requests with status, download URLs, and generated file information
- `create_model_fabrication_request` - Submit a new fabrication request with the current model file (auto-zips and uploads)
- `get_model_fabrication_request_details` - Get detailed information for a specific fabrication request by request code
- `get_model_fabrication_request_schema` - Get JSON schema definition for fabrication request objects
- `open_model_fabrication_request_details` - Open fabrication request details modal for a specific request code
- `list_fabrication_blueprint_catalog_items` - List fabrication blueprints (template sets) with selection status showing which are currently selected in your model
- `select_fabrication_blueprint` - Add a fabrication blueprint from the catalog to your AppDNA model (requires exact name AND version match, re-enables if previously disabled, updates in memory, marks unsaved changes)
- `unselect_fabrication_blueprint` - Remove a fabrication blueprint from your AppDNA model (requires exact name AND version match, updates in memory, marks unsaved changes)

## Navigation Tools for AppDNA Views

The extension provides specialized navigation tools to help you explore different aspects of your AppDNA model:

**User Story Views:**
- Development queue, QA views, journey mapping, page relationships, role requirements

**Data Views:**
- Object details, hierarchical views, usage analysis, property management

**Analytics Views:**
- Metrics dashboards, forecasting tools, cost analysis, bottleneck detection

**UI/UX Views:**
- Page previews, form editors, workflow diagrams, API management

**Workflow & Flow Views:**
- Page initialization flows, general workflows, DynaFlow workflows, workflow tasks

**List & Table Views:**
- Page lists with complexity analysis, data object lists, workflow lists, API lists

## Getting Help

- Use the extension's built-in help system (AppDNA: Show Help command)
- Access the welcome view for new users (AppDNA: Show Welcome command)
- Explore the tree view navigation to understand your model's structure
- Use the page preview feature to see how forms will appear to users
- Check the analytics dashboard for model complexity insights
- Review the lexicon for business terminology definitions

### MCP Integration
- **96 Production-Ready Tools**: Complete coverage of all AppDNA functionality including Model Services API access
- **GitHub Copilot Integration**: Natural language queries for model exploration and modification
- **Safe Model Changes**: All modifications go through validated MCP tools, not direct file editing
- **Real-time Status**: Visual indicators show MCP server running/stopped states
- **Model Services Integration**: Access AI processing, validation, blueprint catalogs, and fabrication requests via MCP tools
- **Feature Selection**: Add or remove model features programmatically with validation (unselect only if not AI-completed)

### Configuration & Settings
- **AppDNA Settings**: Configure extension behavior and advanced features
- **Project Settings**: Manage model metadata and output paths
- **Model Services**: Connect to cloud AI services for enhanced functionality
- **File Watching**: Automatic detection of external model file changes

**Always prefer MCP tools over direct file editing for all model changes to ensure data integrity and proper validation.**
```

---
### `.github/ISSUE_TEMPLATE/bug_report.md`
```markdown
---
name: Bug Report
about: Report a problem in code, config, UI, calculations, or workflow
labels: bug
---
## Description

A clear and detailed description of the issue.

## Steps to Reproduce

## Expected Behavior

What should have happened?

## Actual Behavior

What happened instead?

## Logs / Screenshots

Paste relevant logs or images here.

## Environment

- OS:
- Branch:
- Config versions:
- Equipment / Water source (if applicable)

```

---
### `.github/ISSUE_TEMPLATE/CONTRIBUTING.md`
```markdown
# Contributing Guidelines

## Branch Strategy

- `main`: production-grade, stable only.
- `develop`: integration branch.
- `feature/*`: always branch from `develop`, then merge back via PR.

## Feature Branch Workflow

1. `git checkout develop`
2. `git pull`
3. `git checkout -b feature/<name>`
4. Make changes
5. Commit often
6. Push and open PR into `develop`

## Code Standards

- No hard-coded constants (use configs)
- All formulas must be documented
- Engine logic must be deterministic
- Public APIs must have XML documentation
- Test coverage required for Engine

## Commit Messages

Use the convention:

```
type(scope): message
```

Example:

```
feat(engine): add pH reduction solver
fix(domain): repair reagent assay validation
```

## Pull Requests

- Must pass all tests
- Must receive at least 1 approval
- Must update documentation if applicable
- Must update schemas when configs change

```

---
### `.github/ISSUE_TEMPLATE/feature_request.md`
```markdown


---
name: Feature Request
about: Suggest a new feature or improvement
labels: enhancement
---
## Problem

Explain the limitation or challenge.

## Proposed Solution

Describe the change or new capability.

## Alternatives Considered

## Impact

## Additional Notes

```

---
### `.github/ISSUE_TEMPLATE/SECURITY.md`
```markdown
# Security Policy

## Supported Branches

Security updates apply only to:

- main
- develop

## Reporting a Vulnerability

If you discover a vulnerability, please create a private GitHub security advisory.

## Sensitive Files

Do not commit:

- API keys
- Personal data
- Credentials
- Device identifiers

All configuration changes must be reviewed before merge.

```

---
### `.github/labels.json`
```json
[
    {
        "name": "bug",
        "color": "d73a4a"
    },
    {
        "name": "enhancement",
        "color": "a2eeef"
    },
    {
        "name": "config",
        "color": "c5def5"
    },
    {
        "name": "documentation",
        "color": "0366d6"
    }
]
```

---
### `.github/pull_request_template.md`
```markdown
# Summary

Describe the change, the problem it solves, and the approach used.

# Type of Change

- [ ] Feature
- [ ] Bugfix
- [ ] Refactor
- [ ] Documentation
- [ ] Other

# Checklist

- [ ] Code follows repository standards
- [ ] No hard-coded constants added
- [ ] All new configs have schemas
- [ ] All math steps documented / auditable
- [ ] Unit tests added for new engine logic
- [ ] No UI regressions

# Testing

Explain tests performed and expected behavior.

# Notes

Anything reviewers should pay attention to.

```

---
### `.snapshots/config.json`
```json
{
    "excluded_patterns": [
        ".git",
        ".gitignore",
        "gradle",
        "gradlew",
        "gradlew.*",
        "node_modules",
        ".snapshots",
        ".idea",
        ".vscode",
        "*.log",
        "*.tmp",
        "target",
        "dist",
        "build",
        ".DS_Store",
        "*.bak",
        "*.swp",
        "*.swo",
        "*.lock",
        "*.iml",
        "coverage",
        "*.min.js",
        "*.min.css",
        "__pycache__",
        ".marketing",
        ".env",
        ".env.*",
        "*.jpg",
        "*.jpeg",
        "*.png",
        "*.gif",
        "*.bmp",
        "*.tiff",
        "*.ico",
        "*.svg",
        "*.webp",
        "*.psd",
        "*.ai",
        "*.eps",
        "*.indd",
        "*.raw",
        "*.cr2",
        "*.nef",
        "*.mp4",
        "*.mov",
        "*.avi",
        "*.wmv",
        "*.flv",
        "*.mkv",
        "*.webm",
        "*.m4v",
        "*.wfp",
        "*.prproj",
        "*.aep",
        "*.psb",
        "*.xcf",
        "*.sketch",
        "*.fig",
        "*.xd",
        "*.db",
        "*.sqlite",
        "*.sqlite3",
        "*.mdb",
        "*.accdb",
        "*.frm",
        "*.myd",
        "*.myi",
        "*.ibd",
        "*.dbf",
        "*.rdb",
        "*.aof",
        "*.pdb",
        "*.sdb",
        "*.s3db",
        "*.ddb",
        "*.db-shm",
        "*.db-wal",
        "*.sqlitedb",
        "*.sql.gz",
        "*.bak.sql",
        "dump.sql",
        "dump.rdb",
        "*.vsix",
        "*.jar",
        "*.war",
        "*.ear",
        "*.zip",
        "*.tar",
        "*.tar.gz",
        "*.tgz",
        "*.rar",
        "*.7z",
        "*.exe",
        "*.dll",
        "*.so",
        "*.dylib",
        "*.app",
        "*.dmg",
        "*.iso",
        "*.msi",
        "*.deb",
        "*.rpm",
        "*.apk",
        "*.aab",
        "*.ipa",
        "*.pkg",
        "*.nupkg",
        "*.snap",
        "*.whl",
        "*.gem",
        "*.pyc",
        "*.pyo",
        "*.pyd",
        "*.class",
        "*.o",
        "*.obj",
        "*.lib",
        "*.a",
        "*.map",
        ".npmrc"
    ],
    "default": {
        "default_prompt": "Enter your prompt here",
        "default_include_all_files": false,
        "default_include_entire_project_structure": true
    },
    "included_patterns": [
        "build.gradle",
        "settings.gradle",
        "gradle.properties",
        "pom.xml",
        "Makefile",
        "CMakeLists.txt",
        "package.json",
        "requirements.txt",
        "Pipfile",
        "Gemfile",
        "composer.json",
        ".editorconfig",
        ".eslintrc.json",
        ".eslintrc.js",
        ".prettierrc",
        ".babelrc",
        ".dockerignore",
        ".gitattributes",
        ".stylelintrc",
        ".npmrc"
    ]
}
```

---
### `.snapshots/readme.md`
```markdown
# Snapshots Directory

This directory contains snapshots of your code for AI interactions. Each snapshot is a markdown file that includes relevant code context and project structure information.

## What's included in snapshots?
- Selected code files and their contents
- Project structure (if enabled)
- Your prompt/question for the AI

## Configuration
You can customize snapshot behavior in `config.json`.

```

---
### `app-dna.config.json`
```json
{
  "version": "1.0.0",
  "modelFile": "app-dna.json",
  "settings": {
    "codeGeneration": {
      "outputPath": "./fabrication_results"
    },
    "editor": {
      "showAdvancedProperties": true,
      "expandNodesOnLoad": false
    }
  }
}
```

---
### `app-dna.json`
```json
{
  "root": {
    "name": "DefaultApp",
    "databaseName": "DefaultDatabase",
    "projectCode": "74e2be43-1711-4f67-a0d0-27c6b0e3dd29",
    "namespace": []
  }
}
```

---
### `configs/application_settings.json`
```json
{
    "app": {
        "name": "Water Chemistry Dosing Engine & Logger",
        "version": "1.0.0",
        "paths": {
            "logs": "./logs",
            "exports": "./exports",
            "configs": "./configs",
            "backups": "./backups"
        },
        "logging": {
            "level": "info",
            "format": "json",
            "timestamp_format": "ISO8601",
            "rollover": {
                "max_mb": 10,
                "max_files": 10
            }
        },
        "notifications": {
            "enable_sound": true,
            "enable_popup": true,
            "default_timer_minutes": 15
        },
        "gui": {
            "theme": "dark",
            "decimal_precision_display": 3,
            "decimal_precision_internal": 12,
            "autosave_interval_seconds": 30,
            "show_advanced_tabs": true
        },
        "calculation": {
            "strict_mode": true,
            "fallback_mode_enabled": true,
            "max_iterations": 100,
            "solver_tolerance": 1e-12,
            "rounding_mode": "none",
            "safety_checks": {
                "enable_solubility_checks": true,
                "enable_large_ph_shift_warnings": true,
                "max_ph_shift_allowed": 1.0,
                "enable_residual_ion_tracking": true
            }
        },
        "units": {
            "defaults": {
                "volume": "gallon_us",
                "mass": "g",
                "temperature": "fahrenheit",
                "concentration_mass_per_volume": "mg_per_l",
                "conductivity": "ms_per_cm",
                "tds": "ppm",
                "ph": "ph"
            }
        },
        "schema_validation": {
            "on_startup": true,
            "on_file_save": true,
            "allow_unknown_fields": false
        },
        "feature_toggles": {
            "enable_cli": true,
            "enable_gui": true,
            "enable_device_ingestion": false,
            "enable_inventory_tracking": false
        }
    }
}
```

---
### `configs/application_settings.schema.json`
```json
{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "Application Settings Schema",
    "type": "object",
    "properties": {
        "app": {
            "type": "object",
            "required": [
                "name",
                "version",
                "paths",
                "logging",
                "notifications",
                "gui",
                "calculation",
                "units",
                "schema_validation",
                "feature_toggles"
            ],
            "properties": {
                "name": {
                    "type": "string"
                },
                "version": {
                    "type": "string"
                },
                "paths": {
                    "type": "object",
                    "properties": {
                        "logs": {
                            "type": "string"
                        },
                        "exports": {
                            "type": "string"
                        },
                        "configs": {
                            "type": "string"
                        },
                        "backups": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "logs",
                        "exports",
                        "configs"
                    ],
                    "additionalProperties": false
                },
                "logging": {
                    "type": "object",
                    "properties": {
                        "level": {
                            "type": "string",
                            "enum": [
                                "trace",
                                "debug",
                                "info",
                                "warn",
                                "error",
                                "fatal"
                            ]
                        },
                        "format": {
                            "type": "string",
                            "enum": [
                                "text",
                                "json"
                            ]
                        },
                        "timestamp_format": {
                            "type": "string"
                        },
                        "rollover": {
                            "type": "object",
                            "properties": {
                                "max_mb": {
                                    "type": "number"
                                },
                                "max_files": {
                                    "type": "number"
                                }
                            },
                            "required": [
                                "max_mb",
                                "max_files"
                            ],
                            "additionalProperties": false
                        }
                    },
                    "required": [
                        "level",
                        "format"
                    ],
                    "additionalProperties": false
                },
                "notifications": {
                    "type": "object",
                    "properties": {
                        "enable_sound": {
                            "type": "boolean"
                        },
                        "enable_popup": {
                            "type": "boolean"
                        },
                        "default_timer_minutes": {
                            "type": "number"
                        }
                    },
                    "required": [
                        "enable_sound",
                        "enable_popup"
                    ],
                    "additionalProperties": false
                },
                "gui": {
                    "type": "object",
                    "properties": {
                        "theme": {
                            "type": "string"
                        },
                        "decimal_precision_display": {
                            "type": "number"
                        },
                        "decimal_precision_internal": {
                            "type": "number"
                        },
                        "autosave_interval_seconds": {
                            "type": "number"
                        },
                        "show_advanced_tabs": {
                            "type": "boolean"
                        }
                    },
                    "additionalProperties": false
                },
                "calculation": {
                    "type": "object",
                    "properties": {
                        "strict_mode": {
                            "type": "boolean"
                        },
                        "fallback_mode_enabled": {
                            "type": "boolean"
                        },
                        "max_iterations": {
                            "type": "number"
                        },
                        "solver_tolerance": {
                            "type": "number"
                        },
                        "rounding_mode": {
                            "type": "string",
                            "enum": [
                                "none",
                                "bankers",
                                "away_from_zero"
                            ]
                        },
                        "safety_checks": {
                            "type": "object",
                            "properties": {
                                "enable_solubility_checks": {
                                    "type": "boolean"
                                },
                                "enable_large_ph_shift_warnings": {
                                    "type": "boolean"
                                },
                                "max_ph_shift_allowed": {
                                    "type": "number"
                                },
                                "enable_residual_ion_tracking": {
                                    "type": "boolean"
                                }
                            },
                            "additionalProperties": false
                        }
                    },
                    "required": [
                        "strict_mode"
                    ],
                    "additionalProperties": false
                },
                "units": {
                    "type": "object",
                    "properties": {
                        "defaults": {
                            "type": "object",
                            "patternProperties": {
                                "^[a-zA-Z0-9_]+$": {
                                    "type": "string"
                                }
                            },
                            "additionalProperties": false
                        }
                    },
                    "required": [
                        "defaults"
                    ],
                    "additionalProperties": false
                },
                "schema_validation": {
                    "type": "object",
                    "properties": {
                        "on_startup": {
                            "type": "boolean"
                        },
                        "on_file_save": {
                            "type": "boolean"
                        },
                        "allow_unknown_fields": {
                            "type": "boolean"
                        }
                    },
                    "required": [
                        "on_startup",
                        "on_file_save"
                    ],
                    "additionalProperties": false
                },
                "feature_toggles": {
                    "type": "object",
                    "patternProperties": {
                        "^[a-zA-Z0-9_]+$": {
                            "type": "boolean"
                        }
                    },
                    "additionalProperties": false
                }
            },
            "additionalProperties": false
        }
    },
    "required": [
        "app"
    ],
    "additionalProperties": false
}
```

---
### `configs/calculation_trace.schema.json`
```json
{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "Calculation Trace Schema",
    "type": "object",
    "required": [
        "trace_id",
        "timestamp",
        "calculation_type",
        "inputs",
        "normalized",
        "steps",
        "outputs"
    ],
    "properties": {
        "trace_id": {
            "type": "string"
        },
        "timestamp": {
            "type": "string",
            "format": "date-time"
        },
        "calculation_type": {
            "type": "string",
            "description": "Examples: 'ph_adjustment', 'chlorine_removal', 'ec_targeting'."
        },
        "inputs": {
            "type": "object",
            "description": "Raw user inputs before unit normalization.",
            "additionalProperties": true
        },
        "normalized": {
            "type": "object",
            "description": "Internal canonical units after conversion.",
            "properties": {
                "volume_ml": {
                    "type": "number"
                },
                "temperature_c": {
                    "type": [
                        "number",
                        "null"
                    ]
                },
                "initial_ph": {
                    "type": [
                        "number",
                        "null"
                    ]
                },
                "initial_ec_ms_per_cm": {
                    "type": [
                        "number",
                        "null"
                    ]
                },
                "initial_chlorine_mg_per_l": {
                    "type": [
                        "number",
                        "null"
                    ]
                },
                "initial_chloramine_mg_per_l": {
                    "type": [
                        "number",
                        "null"
                    ]
                }
            },
            "additionalProperties": true
        },
        "steps": {
            "type": "array",
            "description": "Detailed intermediate math steps.",
            "items": {
                "type": "object",
                "required": [
                    "description",
                    "expression",
                    "result"
                ],
                "properties": {
                    "description": {
                        "type": "string"
                    },
                    "expression": {
                        "type": "string",
                        "description": "Human-readable expression (LaTeX-like, optional)."
                    },
                    "result": {
                        "type": [
                            "number",
                            "string",
                            "object",
                            "null"
                        ],
                        "description": "Result of this step."
                    }
                },
                "additionalProperties": false
            }
        },
        "outputs": {
            "type": "object",
            "description": "Final dose recommendation and predicted post-dose state.",
            "properties": {
                "dose": {
                    "type": "object",
                    "required": [
                        "reagent_id",
                        "mass_g"
                    ],
                    "properties": {
                        "reagent_id": {
                            "type": "string"
                        },
                        "mass_g": {
                            "type": "number"
                        },
                        "original_unit": {
                            "type": [
                                "string",
                                "null"
                            ]
                        },
                        "original_value": {
                            "type": [
                                "number",
                                "null"
                            ]
                        }
                    }
                },
                "post_dose_prediction": {
                    "type": "object",
                    "description": "Calculated future water state.",
                    "properties": {
                        "ph": {
                            "type": [
                                "number",
                                "null"
                            ]
                        },
                        "ec_ms_per_cm": {
                            "type": [
                                "number",
                                "null"
                            ]
                        },
                        "tds_ppm": {
                            "type": [
                                "number",
                                "null"
                            ]
                        },
                        "chlorine_mg_per_l": {
                            "type": [
                                "number",
                                "null"
                            ]
                        },
                        "chloramine_mg_per_l": {
                            "type": [
                                "number",
                                "null"
                            ]
                        }
                    },
                    "additionalProperties": true
                },
                "residual_ions_mg_per_l": {
                    "type": "object",
                    "description": "Contribution to Na+, SO4(2-), etc.",
                    "additionalProperties": {
                        "type": "number"
                    }
                }
            },
            "additionalProperties": false
        }
    },
    "additionalProperties": false
}
```

---
### `configs/environment.schema.json`
```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Environment Configuration Schema",
  "type": "object",
  "properties": {
    "environment": {
      "type": "object",
      "properties": {
        "ambient": {
          "type": "object",
          "properties": {
            "temperature": {
              "type": "object",
              "required": ["value", "unit", "base_unit"],
              "properties": {
                "value": { "type": "number" },
                "unit": { "type": "string" },
                "base_unit": { "type": "string" },
                "notes": { "type": "string" }
              }
            },
            "co2_ppm": {
              "type": "object",
              "required": ["value"],
              "properties": {
                "value": { "type": "number" },
                "min": { "type": "number" },
                "max": { "type": "number" },
                "notes": { "type": "string" }
              }
            }
          },
          "required": ["temperature", "co2_ppm"]
        },

        "solver": {
          "type": "object",
          "properties": {
            "max_iterations": { "type": "integer", "minimum": 1 },
            "relative_tolerance": { "type": "number" },
            "absolute_tolerance": { "type": "number" },
            "notes": { "type": "string" }
          },
          "required": ["max_iterations", "relative_tolerance", "absolute_tolerance"]
        },

        "input_units": {
          "type": "object",
          "properties": {
            "temperature": { "type": "string" },
            "volume": { "type": "string" },
            "mass": { "type": "string" },
            "ec": { "type": "string" },
            "tds": { "type": "string" },
            "concentration": { "type": "string" },
            "ph": { "type": "string" },
            "notes": { "type": "string" }
          },
          "required": ["temperature", "volume", "mass", "ec", "tds", "concentration", "ph"]
        },

        "display_units": {
          "type": "object",
          "properties": {
            "temperature": { "type": "string" },
            "volume": { "type": "string" },
            "mass": { "type": "string" },
            "ec": { "type": "string" },
            "tds": { "type": "string" },
            "concentration": { "type": "string" },
            "ph": { "type": "string" }
          },
          "required": ["temperature", "volume", "mass", "ec", "tds", "concentration", "ph"]
        },

        "defaults": {
          "type": "object",
          "properties": {
            "mixing_container_volume": {
              "type": "object",
              "required": ["value", "unit"],
              "properties": {
                "value": { "type": "number" },
                "unit": { "type": "string" },
                "notes": { "type": "string" }
              }
            },
            "calibration_recommendation_days": { "type": "number" },
            "calibration_recommendation_readings": { "type": "number" }
          },
          "required": ["mixing_container_volume"]
        },

        "constants": {
          "type": "object",
          "properties": {
            "R": { "type": "number" },
            "kH_co2_25C": { "type": "number" },
            "notes": { "type": "string" }
          },
          "required": ["R", "kH_co2_25C"]
        }
      },
      "required": [
        "ambient",
        "solver",
        "input_units",
        "display_units",
        "defaults",
        "constants"
      ]
    }
  },
  "required": ["environment"]
}

```

---
### `configs/environment.yaml`
```yaml
# ============================================================
#  environment.yaml
#  Global environmental parameters + user preferences
#  Fully commentable (YAML chosen for clarity)
# ============================================================

environment:

  ############################################################
  # Ambient Conditions
  ############################################################
  ambient:
    temperature:
      value: 70              # User-facing default temperature
      unit: "F"              # Fahrenheit input/display
      base_unit: "C"         # Canonical internal temperature unit
      notes: >
        Temperature is used for ATC corrections, Henry's law,
        equilibration estimates, CO2 off-gassing, and reagent
        dissociation constants.

    co2_ppm:
      value: 420
      min: 350
      max: 600
      notes: >
        Used for CO‚ÇÇ equilibrium calculations (pH drift from
        atmospheric absorption). Adjustable for indoor/outdoor.

  ############################################################
  # Calculation / Solver Parameters
  ############################################################
  solver:
    max_iterations: 50
    relative_tolerance: 1e-12
    absolute_tolerance: 1e-14
    notes: >
      These tolerances are for pH solvers, alkalinity equations,
      acid/base equilibrium calculations, and nonlinear
      concentration solving.

  ############################################################
  # User Input Defaults
  ############################################################
  input_units:
    temperature: "F"
    volume: "gallon"
    mass: "gram"
    ec: "mS/cm"
    tds: "ppm"
    concentration: "mg/L"
    ph: "ph"
    notes: >
      Input defaults affect ONLY what the user enters.
      Internally everything is converted to canonical units
      defined in units.yaml.

  ############################################################
  # Display Defaults
  ############################################################
  display_units:
    temperature: "F"
    volume: "gallon"
    mass: "gram"
    ec: "mS/cm"
    tds: "ppm"
    concentration: "mg/L"
    ph: "ph"

  ############################################################
  # Global Defaults (Containers, Calibration, etc.)
  ############################################################
  defaults:
    mixing_container_volume:
      value: 5
      unit: "gallon"
      notes: >
        Default for your 5-gallon bucket. When no volume is
        given, the system falls back to this.

    calibration_recommendation_days: 30
    calibration_recommendation_readings: 200

  ############################################################
  # Physical Constants
  ############################################################
  constants:
    R: 8.31446261815324          # Universal gas constant (J/mol¬∑K)
    kH_co2_25C: 0.0334           # Henry‚Äôs constant for CO‚ÇÇ @25¬∞C
    notes: >
      Constants may be temperature-corrected depending on the
      calculation path chosen in the engine.

```

---
### `configs/equipment.json`
```json
{
  "equipment": [
    {
      "id": "acinfinity_ph_pro",
      "type": "ph_meter",
      "display_name": "AC Infinity pH Meter Pro",
      "measurements": [
        "ph",
        "temperature"
      ],
      "temperature_compensated": false,
      "tolerance": {
        "ph": 0.01
      },
      "tolerance_default_allowed": true,
      "calibration": {
        "required": true,
        "solutions": [
          "pH 4.00",
          "pH 7.00"
        ],
        "history": [],
        "valid_days": 30,
        "valid_reading_count": 200,
        "use_based_recommendations": true
      },
      "replaceable_parts": {
        "has_replaceable_parts": true,
        "parts": [
          {
            "name": "pH Electrode",
            "vendor": null,
            "product_name": null,
            "purchase_link": null,
            "notes": null
          }
        ]
      },
      "vendor": "AC Infinity",
      "product_source": "Retail",
      "purchase_link": null,
      "notes": "Primary pH instrument used for irrigation water."
    },
    {
      "id": "generic_ec_meter",
      "type": "ec_meter",
      "display_name": "Generic EC/TDS Meter",
      "measurements": [
        "ec",
        "tds",
        "temperature"
      ],
      "temperature_compensated": true,
      "tolerance": {
        "ec": 2.0,
        "tds": 2.0
      },
      "tolerance_default_allowed": true,
      "calibration": {
        "required": false,
        "history": [],
        "valid_days": null,
        "valid_reading_count": null,
        "use_based_recommendations": false
      },
      "replaceable_parts": {
        "has_replaceable_parts": false,
        "parts": []
      },
      "vendor": "Generic",
      "product_source": "Amazon",
      "purchase_link": null,
      "notes": "Simple handheld EC/TDS meter."
    }
  ]
}
```

---
### `configs/equipment.schema.json`
```json
{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "Equipment Configuration Schema",
    "type": "object",
    "properties": {
        "equipment": {
            "type": "array",
            "items": {
                "type": "object",
                "required": [
                    "id",
                    "type",
                    "display_name",
                    "measurements",
                    "temperature_compensated",
                    "tolerance_default_allowed",
                    "calibration",
                    "replaceable_parts"
                ],
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "type": {
                        "type": "string",
                        "description": "e.g., ph_meter, ec_meter, thermometer, etc."
                    },
                    "display_name": {
                        "type": "string"
                    },
                    "measurements": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "description": "List of measurement types this device produces (ph, ec, tds, temperature)."
                    },
                    "temperature_compensated": {
                        "type": "boolean"
                    },
                    "tolerance": {
                        "type": [
                            "object",
                            "null"
                        ],
                        "additionalProperties": {
                            "type": "number"
                        },
                        "description": "Tolerance per measurement type."
                    },
                    "tolerance_default_allowed": {
                        "type": "boolean"
                    },
                    "calibration": {
                        "type": "object",
                        "required": [
                            "required",
                            "history",
                            "use_based_recommendations"
                        ],
                        "properties": {
                            "required": {
                                "type": "boolean"
                            },
                            "solutions": {
                                "type": [
                                    "array",
                                    "null"
                                ],
                                "items": {
                                    "type": "string"
                                }
                            },
                            "history": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "solution_used": {
                                            "type": "string"
                                        },
                                        "notes": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "timestamp",
                                        "solution_used"
                                    ]
                                }
                            },
                            "valid_days": {
                                "type": [
                                    "number",
                                    "null"
                                ]
                            },
                            "valid_reading_count": {
                                "type": [
                                    "number",
                                    "null"
                                ]
                            },
                            "use_based_recommendations": {
                                "type": "boolean"
                            }
                        }
                    },
                    "replaceable_parts": {
                        "type": "object",
                        "required": [
                            "has_replaceable_parts",
                            "parts"
                        ],
                        "properties": {
                            "has_replaceable_parts": {
                                "type": "boolean"
                            },
                            "parts": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "required": [
                                        "name"
                                    ],
                                    "properties": {
                                        "name": {
                                            "type": "string"
                                        },
                                        "vendor": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "product_name": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "purchase_link": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        },
                                        "notes": {
                                            "type": [
                                                "string",
                                                "null"
                                            ]
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "vendor": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "product_source": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "purchase_link": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "notes": {
                        "type": [
                            "string",
                            "null"
                        ]
                    }
                },
                "additionalProperties": false
            }
        }
    },
    "required": [
        "equipment"
    ],
    "additionalProperties": false
}
```

---
### `configs/log_record.schema.json`
```json
{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "Log Record Schema",
    "type": "object",
    "required": [
        "timestamp",
        "log_level",
        "actor",
        "event_type",
        "message",
        "data"
    ],
    "properties": {
        "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "ISO8601 timestamp with timezone."
        },
        "log_level": {
            "type": "string",
            "enum": [
                "trace",
                "debug",
                "info",
                "warn",
                "error",
                "fatal"
            ]
        },
        "actor": {
            "type": "string",
            "description": "Initiator of the event: 'user', 'system', 'calculation_engine', etc."
        },
        "event_type": {
            "type": "string",
            "description": "Semantic category of the event (e.g., 'measurement', 'calculation', 'warning', 'validation_error')."
        },
        "message": {
            "type": "string"
        },
        "data": {
            "type": [
                "object",
                "null"
            ],
            "description": "Structured contextual data for the event.",
            "additionalProperties": true
        },
        "session_id": {
            "type": [
                "string",
                "null"
            ],
            "description": "Optional grouping of multiple log records into a dosing session."
        },
        "trace_id": {
            "type": [
                "string",
                "null"
            ],
            "description": "Optional reference to a calculation trace document."
        }
    },
    "additionalProperties": false
}
```

---
### `configs/plants.json`
```json
{
  "plants": [
    {
      "species_id": "cannabis_sativa",
      "species_name": "Cannabis sativa",
      "common_name": "Cannabis",
      "stages": {
        "seedling": {
          "ph_range": [
            5.5,
            6.0
          ],
          "ec_range_mS_per_cm": [
            0.8,
            1.2
          ],
          "notes": "Delicate roots; avoid nutrient burn.",
          "nutrient_uptake": {}
        },
        "early_vegetative": {
          "ph_range": [
            5.8,
            6.0
          ],
          "ec_range_mS_per_cm": [
            0.8,
            1.3
          ],
          "notes": "Focus on nitrogen uptake and root expansion.",
          "nutrient_uptake": {}
        },
        "late_vegetative": {
          "ph_range": [
            5.6,
            5.9
          ],
          "ec_range_mS_per_cm": [
            1.3,
            1.7
          ],
          "notes": "Rapid canopy growth phase.",
          "nutrient_uptake": {}
        },
        "early_flowering": {
          "ph_range": [
            5.5,
            5.8
          ],
          "ec_range_mS_per_cm": [
            1.6,
            2.0
          ],
          "notes": "Phosphorus demand increases.",
          "nutrient_uptake": {}
        },
        "peak_flowering": {
          "ph_range": [
            5.4,
            5.7
          ],
          "ec_range_mS_per_cm": [
            1.8,
            2.2
          ],
          "notes": "Critical nutrient absorption phase.",
          "nutrient_uptake": {}
        },
        "late_flowering": {
          "ph_range": [
            5.4,
            5.8
          ],
          "ec_range_mS_per_cm": [
            1.6,
            2.0
          ],
          "notes": "Begin tapering EC.",
          "nutrient_uptake": {}
        },
        "pre_harvest": {
          "ph_range": [
            5.5,
            6.0
          ],
          "ec_range_mS_per_cm": [
            1.2,
            1.6
          ],
          "notes": "Lower EC improves flavor in final ripening.",
          "nutrient_uptake": {}
        }
      },
      "cultivars": [
        {
          "cultivar_id": "generic_indica_hybrid",
          "name": "Generic Indica Hybrid",
          "notes": "Example cultivar definition.",
          "instances": [
            {
              "instance_id": "plant_001",
              "location": "tent_a_row_1",
              "water_source_id": "hose_water",
              "equipment_ids": [
                "acinfinity_ph_pro",
                "generic_ec_meter"
              ],
              "notes": "Example instance of a plant in the system."
            }
          ]
        }
      ]
    }
  ]
}
```

---
### `configs/plants.schema.json`
```json
{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "Plant Profiles Schema",
    "type": "object",
    "properties": {
        "plants": {
            "type": "array",
            "items": {
                "type": "object",
                "required": [
                    "species_id",
                    "species_name",
                    "stages",
                    "cultivars"
                ],
                "properties": {
                    "species_id": {
                        "type": "string"
                    },
                    "species_name": {
                        "type": "string"
                    },
                    "common_name": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "stages": {
                        "type": "object",
                        "patternProperties": {
                            "^[a-zA-Z0-9_]+$": {
                                "type": "object",
                                "required": [
                                    "ph_range",
                                    "ec_range_mS_per_cm"
                                ],
                                "properties": {
                                    "ph_range": {
                                        "type": "array",
                                        "minItems": 2,
                                        "maxItems": 2,
                                        "items": {
                                            "type": "number"
                                        }
                                    },
                                    "ec_range_mS_per_cm": {
                                        "type": "array",
                                        "minItems": 2,
                                        "maxItems": 2,
                                        "items": {
                                            "type": "number"
                                        }
                                    },
                                    "notes": {
                                        "type": [
                                            "string",
                                            "null"
                                        ]
                                    },
                                    "nutrient_uptake": {
                                        "type": "object",
                                        "additionalProperties": {
                                            "type": "number"
                                        }
                                    }
                                },
                                "additionalProperties": false
                            }
                        },
                        "additionalProperties": false
                    },
                    "cultivars": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "required": [
                                "cultivar_id",
                                "name",
                                "instances"
                            ],
                            "properties": {
                                "cultivar_id": {
                                    "type": "string"
                                },
                                "name": {
                                    "type": "string"
                                },
                                "notes": {
                                    "type": [
                                        "string",
                                        "null"
                                    ]
                                },
                                "instances": {
                                    "type": "array",
                                    "items": {
                                        "type": "object",
                                        "required": [
                                            "instance_id",
                                            "water_source_id",
                                            "equipment_ids"
                                        ],
                                        "properties": {
                                            "instance_id": {
                                                "type": "string"
                                            },
                                            "location": {
                                                "type": [
                                                    "string",
                                                    "null"
                                                ]
                                            },
                                            "water_source_id": {
                                                "type": "string"
                                            },
                                            "equipment_ids": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            },
                                            "notes": {
                                                "type": [
                                                    "string",
                                                    "null"
                                                ]
                                            }
                                        },
                                        "additionalProperties": false
                                    }
                                }
                            },
                            "additionalProperties": false
                        }
                    }
                },
                "additionalProperties": false
            }
        }
    },
    "required": [
        "plants"
    ],
    "additionalProperties": false
}
```

---
### `configs/reagents.json`
```json
{
  "reagents": [
    {
      "id": "sodium_metabisulfite",
      "display_name": "Sodium Metabisulfite (Campden Tablets)",
      "state": "Solid",
      "formula": "Na2S2O5",
      "assay_percent": 100.0,
      "density_g_per_ml": null,
      "vendor": "Generic",
      "product_name": "Campden Tablets",
      "notes": "Primary dechlorination reagent.",
      "targets": [
        "Chlorine",
        "Chloramine"
      ],
      "residue": {
        "sodium_mg_per_g": null,
        "sulfate_mg_per_g": null,
        "additional_residues": {}
      },
      "safety": {
        "max_delta_mg_per_l": null,
        "max_ph_shift": null,
        "solubility_limit_g_per_l": null,
        "additional": {}
      }
    },
    {
      "id": "sodium_bisulfate",
      "display_name": "Sodium Bisulfate (pH Down)",
      "state": "Solid",
      "formula": "NaHSO4",
      "assay_percent": 93.0,
      "density_g_per_ml": null,
      "vendor": "PoolTime",
      "product_name": "pH Down",
      "notes": "Primary acid for reducing pH.",
      "targets": [
        "Ph"
      ],
      "residue": {
        "sodium_mg_per_g": null,
        "sulfate_mg_per_g": null
      },
      "safety": {
        "max_ph_shift": 0.3
      }
    }
  ]
}
```

---
### `configs/reagents.schema.json`
```json
{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "Reagents Configuration Schema",
    "type": "object",
    "properties": {
        "reagents": {
            "type": "array",
            "items": {
                "type": "object",
                "required": [
                    "id",
                    "display_name",
                    "state",
                    "formula",
                    "assay_percent",
                    "calculation"
                ],
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "display_name": {
                        "type": "string"
                    },
                    "state": {
                        "type": "string",
                        "enum": [
                            "solid",
                            "liquid"
                        ]
                    },
                    "formula": {
                        "type": "string"
                    },
                    "assay_percent": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 100
                    },
                    "density_g_per_ml": {
                        "type": [
                            "number",
                            "null"
                        ],
                        "description": "Required for liquid reagents; null for solids."
                    },
                    "vendor": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "product_name": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "product_source": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "description": "Where it was purchased (e.g., online, local store, etc.)."
                    },
                    "purchase_link": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "lot_number": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "notes": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "calculation": {
                        "type": "object",
                        "required": [
                            "targets",
                            "effects"
                        ],
                        "properties": {
                            "targets": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                },
                                "description": "What this reagent is used to adjust (e.g., chlorine, chloramine, ph)."
                            },
                            "effects": {
                                "type": "object",
                                "properties": {
                                    "sodium_mg_per_g": {
                                        "type": [
                                            "number",
                                            "null"
                                        ],
                                        "description": "mg of Na+ contributed per gram of reagent."
                                    },
                                    "sulfate_mg_per_g": {
                                        "type": [
                                            "number",
                                            "null"
                                        ],
                                        "description": "mg of SO4(2-) contributed per gram of reagent."
                                    }
                                },
                                "additionalProperties": {
                                    "type": [
                                        "number",
                                        "null"
                                    ],
                                    "description": "Allows future tracking of other ions (e.g., Ca, Mg, K)."
                                }
                            },
                            "preferred_units": {
                                "type": "object",
                                "properties": {
                                    "dose_mass": {
                                        "type": "string"
                                    },
                                    "water_volume": {
                                        "type": "string"
                                    },
                                    "chlorine_concentration": {
                                        "type": "string"
                                    }
                                },
                                "additionalProperties": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                },
                "additionalProperties": false
            }
        }
    },
    "required": [
        "reagents"
    ],
    "additionalProperties": false
}
```

---
### `configs/units_of_measure.schema.json`
```json
{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "Units of Measure Schema",
    "type": "object",
    "patternProperties": {
        "^[a-zA-Z0-9_]+$": {
            "type": "object",
            "required": [
                "base_unit",
                "units",
                "conversions"
            ],
            "properties": {
                "base_unit": {
                    "type": "string"
                },
                "units": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "minItems": 1
                },
                "conversions": {
                    "type": "object",
                    "patternProperties": {
                        "^.+ -> .+$": {
                            "type": "string",
                            "description": "math expression using variable 'x'"
                        }
                    },
                    "additionalProperties": false
                }
            },
            "additionalProperties": false
        }
    },
    "additionalProperties": false
}
```

---
### `configs/units_of_measure.yaml`
```yaml
# Units of Measure Configuration
# Each category defines:
# - base_unit: the canonical storage unit used internally
# - units[]: list of units the user may input or display
# - conversions: expression mapping from any unit ‚Üí base unit
# Conversion expressions use a simple DSL:
#   "<input> -> <base>: <math_expression_with_x>"
#   Where "x" is the input value.

volume:
  base_unit: "ml"

  units:
    - ml
    - liter
    - gallon_us
    - quart_us
    - pint_us
    - cup_us

  conversions:
    "ml -> ml": "x"
    "liter -> ml": "x * 1000"
    "gallon_us -> ml": "x * 3785.411784"
    "quart_us -> ml": "x * 946.352946"
    "pint_us -> ml": "x * 473.176473"
    "cup_us -> ml": "x * 236.588236"

mass:
  base_unit: "g"

  units:
    - g
    - mg
    - kg
    - oz
    - lb

  conversions:
    "g -> g": "x"
    "mg -> g": "x / 1000"
    "kg -> g": "x * 1000"
    "oz -> g": "x * 28.349523125"
    "lb -> g": "x * 453.59237"

temperature:
  base_unit: "celsius"

  units:
    - celsius
    - fahrenheit
    - kelvin

  conversions:
    "celsius -> celsius": "x"
    "fahrenheit -> celsius": "(x - 32) * (5/9)"
    "kelvin -> celsius": "x - 273.15"

concentration_mass_per_volume:
  base_unit: "mg_per_l"

  units:
    - mg_per_l
    - ug_per_l
    - ppm
    - ppb

  conversions:
    "mg_per_l -> mg_per_l": "x"
    "ug_per_l -> mg_per_l": "x / 1000"
    "ppm -> mg_per_l": "x" # In water, ppm ‚âà mg/L
    "ppb -> mg_per_l": "x / 1000"

conductivity:
  base_unit: "ms_per_cm"

  units:
    - ms_per_cm
    - us_per_cm

  conversions:
    "ms_per_cm -> ms_per_cm": "x"
    "us_per_cm -> ms_per_cm": "x / 1000"

tds:
  base_unit: "ppm"

  units:
    - ppm
    - mg_per_l

  conversions:
    "ppm -> ppm": "x"
    "mg_per_l -> ppm": "x" # Equivalent in freshwater

ph:
  base_unit: "ph"
  units:
    - ph
  conversions:
    "ph -> ph": "x"

```

---
### `configs/water_sources.json`
```json
{
  "water_sources": [
    {
      "id": "hose_water",
      "display_name": "Outdoor Hose (5-Gal Bucket Fill)",
      "type": "tap",
      "baseline": {
        "ph": null,
        "ec_mS_per_cm": null,
        "tds_ppm": null,
        "temperature_c": null,
        "chlorine_mg_per_l": null,
        "chloramine_mg_per_l": null,
        "hardness_mg_per_l_as_caco3": null,
        "alkalinity_mg_per_l_as_caco3": null
      },
      "notes": "Represents typical fill water from the outdoor spigot routed into a 5-gallon bucket. Measurements entered manually."
    },
    {
      "id": "distilled",
      "display_name": "Distilled Water",
      "type": "distilled",
      "baseline": {
        "ph": null,
        "ec_mS_per_cm": 0.0,
        "tds_ppm": 0.0,
        "temperature_c": null,
        "chlorine_mg_per_l": 0.0,
        "chloramine_mg_per_l": 0.0,
        "hardness_mg_per_l_as_caco3": 0.0,
        "alkalinity_mg_per_l_as_caco3": 0.0
      },
      "notes": "Commercial distilled water. Ideal for calibration checks or sensitive cultivars."
    },
    {
      "id": "deionized",
      "display_name": "Deionized Water",
      "type": "di",
      "baseline": {
        "ph": null,
        "ec_mS_per_cm": 0.0,
        "tds_ppm": 0.0,
        "temperature_c": null,
        "chlorine_mg_per_l": 0.0,
        "chloramine_mg_per_l": 0.0,
        "hardness_mg_per_l_as_caco3": 0.0,
        "alkalinity_mg_per_l_as_caco3": 0.0
      },
      "notes": "DI water (laboratory grade or home unit)."
    }
  ]
}
```

---
### `configs/water_sources.schema.json`
```json
{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "Water Sources Schema",
    "type": "object",
    "properties": {
        "water_sources": {
            "type": "array",
            "items": {
                "type": "object",
                "required": [
                    "id",
                    "display_name",
                    "type",
                    "baseline"
                ],
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "display_name": {
                        "type": "string"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "tap",
                            "distilled",
                            "di",
                            "ro",
                            "rain",
                            "stored",
                            "purchased",
                            "other"
                        ]
                    },
                    "baseline": {
                        "type": "object",
                        "properties": {
                            "ph": {
                                "type": [
                                    "number",
                                    "null"
                                ]
                            },
                            "ec_mS_per_cm": {
                                "type": [
                                    "number",
                                    "null"
                                ]
                            },
                            "tds_ppm": {
                                "type": [
                                    "number",
                                    "null"
                                ]
                            },
                            "temperature_c": {
                                "type": [
                                    "number",
                                    "null"
                                ]
                            },
                            "chlorine_mg_per_l": {
                                "type": [
                                    "number",
                                    "null"
                                ]
                            },
                            "chloramine_mg_per_l": {
                                "type": [
                                    "number",
                                    "null"
                                ]
                            },
                            "hardness_mg_per_l_as_caco3": {
                                "type": [
                                    "number",
                                    "null"
                                ]
                            },
                            "alkalinity_mg_per_l_as_caco3": {
                                "type": [
                                    "number",
                                    "null"
                                ]
                            }
                        },
                        "additionalProperties": false,
                        "required": []
                    },
                    "notes": {
                        "type": [
                            "string",
                            "null"
                        ]
                    }
                },
                "additionalProperties": false
            }
        }
    },
    "required": [
        "water_sources"
    ],
    "additionalProperties": false
}
```

---
### `frontmatter.json`
```json
{
  "$schema": "https://frontmatter.codes/frontmatter.schema.json",
  "frontMatter.taxonomy.contentTypes": [
    {
      "name": "default",
      "pageBundle": false,
      "previewPath": null,
      "fields": [
        {
          "title": "Title",
          "name": "title",
          "type": "string"
        },
        {
          "title": "Description",
          "name": "description",
          "type": "string"
        },
        {
          "title": "Publishing date",
          "name": "date",
          "type": "datetime",
          "default": "{{now}}",
          "isPublishDate": true
        },
        {
          "title": "Content preview",
          "name": "preview",
          "type": "image"
        },
        {
          "title": "Is in draft",
          "name": "draft",
          "type": "draft"
        },
        {
          "title": "Tags",
          "name": "tags",
          "type": "tags"
        },
        {
          "title": "Categories",
          "name": "categories",
          "type": "categories"
        }
      ]
    }
  ],
  "frontMatter.framework.id": "other",
  "frontMatter.content.publicFolder": "",
  "frontMatter.content.pageFolders": [
    {
      "path": "[[workspace]]/project_state/planning",
      "title": "planning"
    },
    {
      "path": "[[workspace]]/.github"
    },
    {
      "title": ".snapshots",
      "path": "[[workspace]]/.snapshots"
    },
    {
      "title": "specs",
      "path": "[[workspace]]/project_state/specs"
    },
    {
      "title": "onboarding",
      "path": "[[workspace]]/project_state/onboarding"
    },
    {
      "title": "planning",
      "path": "[[workspace]]/project_state/planning"
    },
    {
      "title": "collaboration",
      "path": "[[workspace]]/project_state/collaboration"
    },
    {
      "title": "ISSUE_TEMPLATE",
      "path": "[[workspace]]/.github/ISSUE_TEMPLATE"
    },
    {
      "title": "gpt_memory",
      "path": "[[workspace]]/project_state/meta/gpt_memory"
    }
  ],
  "frontMatter.git.enabled": false
}
```

---
### `gitsaine.sh`
```bash
# --- Settings ---
$Artifacts = "artifacts"
$VSCode = ".vscode"

# --- Ensure folders ---
New-Item -ItemType Directory -Force -Path $Artifacts, `
  "$Artifacts\bin", "$Artifacts\obj", "$Artifacts\packages", `
  "$Artifacts\test-results", "$Artifacts\logs", "$Artifacts\coverage", `
  "$Artifacts\fabrication", "$Artifacts\ci", "$Artifacts\snapshots" | Out-Null
New-Item -ItemType Directory -Force -Path $VSCode | Out-Null

# --- Directory.Build.props ---
@"
<Project>
  <PropertyGroup>
    <BaseOutputPath>$(MSBuildThisFileDirectory)$Artifacts\bin\</BaseOutputPath>
    <BaseIntermediateOutputPath>$(MSBuildThisFileDirectory)$Artifacts\obj\</BaseIntermediateOutputPath>
    <RestorePackagesPath>$(MSBuildThisFileDirectory)$Artifacts\packages\</RestorePackagesPath>
    <VSTestResultsDirectory>$(MSBuildThisFileDirectory)$Artifacts\test-results\</VSTestResultsDirectory>
    <Deterministic>true</Deterministic>
    <ContinuousIntegrationBuild Condition=" '$(GITHUB_ACTIONS)' == 'true' ">true</ContinuousIntegrationBuild>
  </PropertyGroup>
</Project>
"@ | Set-Content -NoNewline -Encoding UTF8 "Directory.Build.props"

# --- .gitignore ---
@"
# Central artifact sink
$Artifacts/

# VS/VSCode/.NET
.vs/
**/[Bb]in/
**/[Oo]bj/
*.user
*.suo
*.userosscache
*.sln.docstates

# NuGet
*.nupkg
*.snupkg
.nuget/

# Test/coverage
TestResult*/
*.trx
*.coverage*
coverage/

# VS Code
.vscode/*
!.vscode/settings.json
!.vscode/tasks.json
!.vscode/launch.json
!.vscode/extensions.json

# OS (Windows)
Thumbs.db
Desktop.ini
$RECYCLE.BIN/

# Logs/temp
*.log
*.tmp
*.temp

# JetBrains
.idea/
*.DotSettings.user
_ReSharper.Caches/

# Node
node_modules/
"@ | Set-Content -NoNewline -Encoding UTF8 ".gitignore"

# --- .gitattributes ---
@"
* text=auto
*.sln text eol=crlf
*.cs  text eol=lf
*.csproj text eol=lf
*.props text eol=lf
*.targets text eol=lf
*.json text eol=lf
*.yml  text eol=lf
*.yaml text eol=lf
*.md   text eol=lf
"@ | Set-Content -NoNewline -Encoding UTF8 ".gitattributes"

# --- .editorconfig ---
@"
root = true

[*]
charset = utf-8
insert_final_newline = true
indent_style = space
end_of_line = lf

[*.sln]
end_of_line = crlf

[*.{cs,csproj,props,targets}]
indent_size = 4
"@ | Set-Content -NoNewline -Encoding UTF8 ".editorconfig"

# --- .vscode/tasks.json ---
@"
{
  "version": "2.0.0",
  "tasks": [
    { "label": "restore", "type": "shell", "command": "dotnet restore", "problemMatcher": "$msCompile" },
    { "label": "build",   "type": "shell", "command": "dotnet build --no-restore", "problemMatcher": "$msCompile" },
    {
      "label": "test",
      "type": "shell",
      "options": { "env": { "DOTNET_TEST_RESULTS_DIRECTORY": "\${workspaceFolder}/$Artifacts/test-results" } },
      "command": "dotnet test --no-build --logger \"trx;LogFileName=\${workspaceFolder}/$Artifacts/test-results/tests.trx\"",
      "problemMatcher": "$msCompile"
    },
    { "label": "pack",    "type": "shell", "command": "dotnet pack --no-build -o $Artifacts/ci", "problemMatcher": "$msCompile" },
    { "label": "clean",   "type": "shell", "command": "git clean -xdf -e $Artifacts/ -e .vscode/", "problemMatcher": [] }
  ]
}
"@ | Set-Content -NoNewline -Encoding UTF8 "$VSCode\tasks.json"

# --- .vscode/settings.json ---
@"
{
  "files.watcherExclude": {
    "**/$Artifacts/**": true,
    "**/.git/**": true
  },
  "dotnet-test-explorer.testProjectPath": "tests/**/**.csproj"
}
"@ | Set-Content -NoNewline -Encoding UTF8 "$VSCode\settings.json"

# --- One-time cleanup: stop tracking now-ignored files (keeps local copies) ---
git rm -r --cached . 2>$null
git add .
git commit -m "chore(repo): centralize and ignore generated artifacts" 2>$null
Write-Host "‚úÖ Repo hygiene applied. Build/test artifacts will go to '$Artifacts/'."

```

---
### `README.md`
```markdown

```

---
### `src/WaterChem.CLI/Program.cs`
```csharp
// See https://aka.ms/new-console-template for more information
Console.WriteLine("Hello, World!");

```

---
### `src/WaterChem.CLI/WaterChem.CLI.csproj`
```xml
<Project Sdk="Microsoft.NET.Sdk">

  <ItemGroup>
    <ProjectReference Include="..\WaterChem.Engine\WaterChem.Engine.csproj" />
  </ItemGroup>

  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>

</Project>

```

---
### `src/WaterChem.Domain/.editorconfig`
```
(Content for binary or unknown file type not displayed)
```

---
### `src/WaterChem.Domain/Equipment/CalibrationProfile.cs`
```csharp
using System;
using System.Collections.Generic;

namespace WaterChem.Domain.Equipment
{
    /// <summary>
    /// Defines calibration requirements and history
    /// for a measurement device.
    /// </summary>
    public sealed class CalibrationProfile
    {
        /// <summary>
        /// Whether the device requires calibration at all.
        /// </summary>
        public bool Required { get; set; }

        /// <summary>
        /// List of required calibration solution labels:
        /// e.g. ["pH 4.00", "pH 7.00", "pH 10.00"]
        /// </summary>
        public List<string> Solutions { get; set; } = new();

        /// <summary>
        /// History of calibration events.
        /// The engine stores timestamps in ISO 8601 format.
        /// Dates only, no logic.
        /// </summary>
        public List<CalibrationRecord> History { get; set; } = new();

        /// <summary>
        /// How many days a calibration is considered "valid".
        /// Null means no day-based expiration.
        /// </summary>
        public int? ValidDays { get; set; }

        /// <summary>
        /// Calibration validity based on number of readings.
        /// Null means no usage-based expiration.
        /// </summary>
        public int? ValidReadingCount { get; set; }

        /// <summary>
        /// Whether the app should show reminders
        /// based on reading count usage patterns.
        /// </summary>
        public bool UseBasedRecommendations { get; set; }
    }

    public sealed class CalibrationRecords
    {
        /// <summary>
        /// Timestamp of the calibration event.
        /// </summary>
        public DateTime Timestamp { get; set; }

        /// <summary>
        /// Optional notes or reference data.
        /// </summary>
        public string? Notes { get; set; }
    }
}

```

---
### `src/WaterChem.Domain/Equipment/CalibrationRecord.cs`
```csharp
using NodaTime;

namespace WaterChem.Domain.Equipment;

public class CalibrationRecord
{
    public Instant Timestamp { get; set; }   // precise, timezone-safe
    public string? Technician { get; set; }
    public string? Notes { get; set; }

    public Dictionary<string, decimal> Results { get; set; } = new();
}

```

---
### `src/WaterChem.Domain/Equipment/Equipment.cs`
```csharp
using System.Collections.Generic;

namespace WaterChem.Domain.Equipment
{
    /// <summary>
    /// Represents a physical measurement device such as:
    ///   - pH meter
    ///   - EC/TDS meter
    ///   - Thermometer
    ///   - Combination probes
    ///
    /// Contains NO logic or transformations.
    /// Pure data loaded from configuration.
    /// </summary>
    public sealed class Equipment
    {
        public string Id { get; set; } = string.Empty;

        /// <summary>
        /// e.g. "ph_meter", "ec_meter", "thermometer"
        /// This is NOT an enum, intentionally dynamic to support future devices.
        /// </summary>
        public string Type { get; set; } = string.Empty;

        public string DisplayName { get; set; } = string.Empty;

        /// <summary>
        /// Measurements this device supports:
        /// e.g. ["ph", "temperature"], ["ec"], etc.
        /// </summary>
        public List<string> Measurements { get; set; } = new();

        /// <summary>
        /// Whether the device provides built-in ATC (automatic temperature compensation).
        /// </summary>
        public bool TemperatureCompensated { get; set; }

        /// <summary>
        /// Per-measurement tolerances.
        /// Example: { "ph": 0.01, "ec": 2.0 }
        /// </summary>
        public Dictionary<string, decimal> Tolerance { get; set; } = new();

        /// <summary>
        /// Whether defaults may be used when the exact device tolerance is unknown.
        /// </summary>
        public bool ToleranceDefaultAllowed { get; set; } = true;

        public CalibrationProfile Calibration { get; set; } = new CalibrationProfile();

        public ReplaceablePartsProfile ReplaceableParts { get; set; } = new ReplaceablePartsProfile();

        public string? Notes { get; set; }
    }
}

```

---
### `src/WaterChem.Domain/Equipment/EquipmentSet.cs`
```csharp
using System.Collections.Generic;

namespace WaterChem.Domain.Equipment
{
    /// <summary>
    /// Container for multiple equipment entries.
    /// Matches the structure of equipment.json.
    /// </summary>
    public sealed class EquipmentSet
    {
        public List<Equipment> Equipment { get; set; } = new();
    }
}

```

---
### `src/WaterChem.Domain/Equipment/EquipmentType.cs`
```csharp
namespace WaterChem.Domain.Equipment;

public enum EquipmentType
{
    PhMeter,
    EcMeter,
    Thermometer,
    MultiparameterProbe,
    Scale,
    Pump,
    Unknown
}

```

---
### `src/WaterChem.Domain/Equipment/ReplaceablePart.cs`
```csharp
namespace WaterChem.Domain.Equipment;

public class ReplaceablePart
{
    public string Name { get; set; } = string.Empty;

    public string? Vendor { get; set; }
    public string? ProductName { get; set; }
    public string? PurchaseLink { get; set; }

    public string? Notes { get; set; }
}

```

---
### `src/WaterChem.Domain/Equipment/ReplaceablePartsProfile.cs`
```csharp
using System.Collections.Generic;

namespace WaterChem.Domain.Equipment
{
    /// <summary>
    /// Defines replaceable parts for an equipment item.
    /// Example: pH probe electrodes, EC probe heads, etc.
    /// </summary>
    public sealed class ReplaceablePartsProfile
    {
        public bool HasReplaceablePart { get; set; }

        public List<ReplaceablePart> Parts { get; set; } = new();
    }

    public sealed class ReplaceableParts
    {
        public string Name { get; set; } = string.Empty;

        public string? Vendor { get; set; }

        public string? ProductName { get; set; }

        public string? PurchaseLink { get; set; }

        public string? Notes { get; set; }
    }
}

```

---
### `src/WaterChem.Domain/Plants/GrowthStageProfile.cs`
```csharp
namespace WaterChem.Domain.Plants;

public class GrowthStageProfile
{
    // pH target range
    public decimal? PhMin { get; set; }
    public decimal? PhMax { get; set; }

    // EC target range
    public decimal? EcMin { get; set; }
    public decimal? EcMax { get; set; }

    // Temperature targets (solution temp)
    public decimal? TemperatureMinC { get; set; }
    public decimal? TemperatureMaxC { get; set; }

    // Optional nutrient uptake hints 
    // (NOT used in Engine v1; used during diagnosis/troubleshooting)
    public Dictionary<string, string>? NutrientUptakeNotes { get; set; }
}




```

---
### `src/WaterChem.Domain/Plants/PlantCultivar.cs`
```csharp
namespace WaterChem.Domain.Plants;

public class PlantCultivar
{
    public string CultivarId { get; set; } = string.Empty;
    public string Name { get; set; } = string.Empty;

    // Optional notes, environmental sensitivities, etc.
    public string? Notes { get; set; }

    // Actual individual plants of this cultivar
    public List<PlantInstance> Instances { get; set; } = new();
}

```

---
### `src/WaterChem.Domain/Plants/PlantInstance.cs`
```csharp
namespace WaterChem.Domain.Plants;

public class PlantInstance
{
    public string InstanceId { get; set; } = string.Empty;
    public string? Nickname { get; set; }

    // Where the plant physically lives
    public string? Location { get; set; }

    // References to water source and equipment profiles
    public string WaterSourceId { get; set; } = string.Empty;
    public List<string> EquipmentIds { get; set; } = new();

    // Optional notes for tracking plant health, issues, etc.
    public string? Notes { get; set; }
}

```

---
### `src/WaterChem.Domain/Plants/PlantSpecies.cs`
```csharp
namespace WaterChem.Domain.Plants;

public class PlantSpecies
{
    public string SpeciesId { get; set; } = string.Empty;
    public string ScientificName { get; set; } = string.Empty;
    public string? CommonName { get; set; }

    // Growth stage profiles for the species
    public Dictionary<string, GrowthStageProfile> StageProfiles { get; set; }
        = new();

    // Cultivars belonging to this species
    public List<PlantCultivar> Cultivars { get; set; } = new();
}

```

---
### `src/WaterChem.Domain/Reagents/Reagent.cs`
```csharp
namespace WaterChem.Domain.Reagents;

public class Reagent
{
    public string Id { get; set; } = string.Empty;
    public string DisplayName { get; set; } = string.Empty;

    public ReagentState State { get; set; }

    // Chemical formula (purely informational)
    public string? Formula { get; set; }

    // Assay or purity. For solids: %. For liquids: depends on product.
    public decimal? AssayPercent { get; set; }

    // Only applies to liquids
    public decimal? Density_g_per_ml { get; set; }

    // Optional: vendor/manufacturer/product details
    public string? Vendor { get; set; }
    public string? ProductName { get; set; }
    public string? Notes { get; set; }

    // What this reagent can modify
    public List<ReagentTarget> Targets { get; set; } = new();

    // Residue contributions (these DO NOT contain logic; only data)
    public ResidueEffect? Residue { get; set; }

    // Safety/constraints ‚Äî Engine will interpret them, not the domain.
    public SafetyConstraint? Safety { get; set; }
}

```

---
### `src/WaterChem.Domain/Reagents/ReagentCalculationProfile.cs`
```csharp
using System.Collections.Generic;

namespace WaterChem.Domain.Reagents
{
    /// <summary>
    /// Represents the calculation metadata for a reagent.
    /// This defines:
    ///  - Which metrics it affects
    ///  - How it affects them (ion contributions)
    ///  - Optional molecular constants
    ///  - Any special-case flags the Engine may use
    /// 
    /// Domain objects MUST contain no calculation logic.
    /// This class is strictly a structured data definition.
    /// </summary>
    public sealed class ReagentCalculationProfile
    {
        /// <summary>
        /// What this reagent targets:
        ///   "ph" / "chlorine" / "chloramine" / "alkalinity" etc.
        /// </summary>
        public List<string> Targets { get; set; } = new();

        /// <summary>
        /// Optional molecular mass in g/mol.
        /// Used by the Engine but not required to be populated.
        /// </summary>
        public decimal? MolecularMass { get; set; }

        /// <summary>
        /// Optional acid dissociation constant (Ka).
        /// Useful for reagents that alter pH via acid/base equilibria.
        /// </summary>
        public decimal? AcidDissociationConstant { get; set; }

        /// <summary>
        /// How much sodium (mg), sulfate (mg), etc., is contributed per gram.
        /// Keys are lowercase ion names, e.g.:
        ///   "na": mg of sodium contributed per gram reagent
        ///   "so4": mg of sulfate per gram reagent
        ///   "hplus": mmol of H+ released per gram reagent (optional)
        /// </summary>
        public Dictionary<string, decimal> IonContributionsMgPerGram { get; set; } = new();

        /// <summary>
        /// Whether this reagent should be treated as requiring iterative pH solving.
        /// For acids such as NaHSO4, this is usually true.
        /// </summary>
        public bool RequiresPhSolver { get; set; } = false;

        /// <summary>
        /// Any special flags used by Engine for safety checks.
        /// Examples:
        ///   "strong_acid"
        ///   "reducing_agent"
        /// </summary>
        public List<string> Flags { get; set; } = new();

        /// <summary>
        /// Additional free-form notes for auditing & traceability.
        /// </summary>
        public string? Notes { get; set; }
    }
}

```

---
### `src/WaterChem.Domain/Reagents/ReagentMetadata.cs`
```csharp
namespace WaterChem.Domain.Reagents;

/// <summary>
/// Describes any non-primary residue contributions a reagent leaves behind.
/// This is a data-only type; behavior belongs in the engine layer.
/// </summary>
public sealed class ResidueEffects
{
}

/// <summary>
/// Describes safety-related metadata and constraints for how a reagent may be used.
/// This is a data-only type; behavior belongs in the engine layer.
/// </summary>
public sealed class SafetyConstraint
{
}

```

---
### `src/WaterChem.Domain/Reagents/ReagentResidueEffect.cs`
```csharp
namespace WaterChem.Domain.Reagents;

public class ResidueEffect
{
    public decimal? Sodium_mg_per_g { get; set; }
    public decimal? Sulfate_mg_per_g { get; set; }
    public decimal? Bicarbonate_mg_per_g { get; set; }
    public decimal? Chloride_mg_per_g { get; set; }

    // Extendable without breaking the model.
    public Dictionary<string, decimal>? AdditionalResidues { get; set; }
}

```

---
### `src/WaterChem.Domain/Reagents/ReagentState.cs`
```csharp
namespace WaterChem.Domain.Reagents;

public enum ReagentState
{
    Solid,
    Liquid
}

```

---
### `src/WaterChem.Domain/Reagents/ReagentTarget.cs`
```csharp
namespace WaterChem.Domain.Reagents;

public class ReagentTarget
{
    // mg/L max safe adjustment per dose (optional)
    public decimal? MaxDeltaMgPerL { get; set; }

    // Max allowed pH change per adjustment step (domain-level rule)
    public decimal? MaxPhShift { get; set; }

    // Solubility limits per reagent (g / L)
    public decimal? SolubilityLimit_g_per_L { get; set; }

    // Free-form extensible constraints
    public Dictionary<string, decimal>? Additional { get; set; }
}

```

---
### `src/WaterChem.Domain/Reagents/SafetyConstraints.cs`
```csharp
namespace WaterChem.Domain.Reagents;

public class SafetyConstraints
{
    // mg/L max safe adjustment per dose (optional)
    public decimal? MaxDeltaMgPerL { get; set; }

    // Max allowed pH change per adjustment step (domain-level rule)
    public decimal? MaxPhShift { get; set; }

    // Solubility limits per reagent (g / L)
    public decimal? SolubilityLimit_g_per_L { get; set; }

    // Free-form extensible constraints
    public Dictionary<string, decimal>? Additional { get; set; }
}

```

---
### `src/WaterChem.Domain/Units/ConversionFormula.cs`
```csharp

```

---
### `src/WaterChem.Domain/Units/UnitCategory.cs`
```csharp

```

---
### `src/WaterChem.Domain/Units/UnitDefinition.cs`
```csharp

```

---
### `src/WaterChem.Domain/Units/UnitsConfig.cs`
```csharp

```

---
### `src/WaterChem.Domain/WaterChem.Domain.csproj`
```xml
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.EntityFrameworkCore" Version="10.0.0" />
    <PackageReference Include="NodaTime" Version="3.2.2" />
    <PackageReference Include="Style" Version="1.0.0" />
  </ItemGroup>

</Project>

```

---
### `src/WaterChem.Domain/WaterSources/WaterBaselineParameters.cs`
```csharp

```

---
### `src/WaterChem.Domain/WaterSources/WaterSource.cs`
```csharp

```

---
### `src/WaterChem.Engine/.config/dotnet-tools.json`
```json
{
  "version": 1,
  "isRoot": true,
  "tools": {}
}
```

---
### `src/WaterChem.Engine/PlaceHolder.cs.cs`
```csharp
namespace WaterChem.Engine;

public class PlaceHolder.cs
{

}

```

---
### `src/WaterChem.Engine/WaterChem.Engine.csproj`
```xml
<Project Sdk="Microsoft.NET.Sdk">
  <ItemGroup>
    <ProjectReference Include="..\WaterChem.Domain\WaterChem.Domain.csproj" />
  </ItemGroup>

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="connorjs-analyzers" Version="0.5.0" />
  </ItemGroup>
</Project>

```

---
### `src/WaterChem.GUI/App.xaml`
```
(Content for binary or unknown file type not displayed)
```

---
### `src/WaterChem.GUI/App.xaml.cs`
```csharp
using System.Configuration;
using System.Data;
using System.Windows;

namespace WaterChem.GUI;

/// <summary>
/// Interaction logic for App.xaml
/// </summary>
public partial class App : Application { }

```

---
### `src/WaterChem.GUI/AssemblyInfo.cs`
```csharp
using System.Windows;

[assembly: ThemeInfo(
  ResourceDictionaryLocation.None, //where theme specific resource dictionaries are located
  //(used if a resource is not found in the page,
  // or application resource dictionaries)
  ResourceDictionaryLocation.SourceAssembly //where the generic resource dictionary is located
//(used if a resource is not found in the page,
// app, or any theme specific resource dictionaries)
)]

```

---
### `src/WaterChem.GUI/MainWindow.xaml`
```
(Content for binary or unknown file type not displayed)
```

---
### `src/WaterChem.GUI/MainWindow.xaml.cs`
```csharp
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WaterChem.GUI;

/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
  public MainWindow()
  {
    InitializeComponent();
  }
}

```

---
### `src/WaterChem.GUI/WaterChem.GUI.csproj`
```xml
<Project Sdk="Microsoft.NET.Sdk">

  <ItemGroup>
    <ProjectReference Include="..\WaterChem.Engine\WaterChem.Engine.csproj" />
  </ItemGroup>

  <PropertyGroup>
    <OutputType>WinExe</OutputType>
    <TargetFramework>net10.0-windows</TargetFramework>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
    <UseWPF>true</UseWPF>
  </PropertyGroup>

</Project>

```

---
### `tests/WaterChem.Domain.Tests/UnitTest1.cs`
```csharp
namespace WaterChem.Domain.Tests;

public class UnitTest1
{
    [Fact]
    public void Test1()
    {

    }
}

```

---
### `tests/WaterChem.Domain.Tests/WaterChem.Domain.Tests.csproj`
```xml
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <IsPackable>false</IsPackable>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="coverlet.collector" Version="6.0.4" />
    <PackageReference Include="Microsoft.EntityFrameworkCore" Version="10.0.0" />
    <PackageReference Include="Microsoft.NET.Test.Sdk" Version="18.0.1" />
    <PackageReference Include="xunit" Version="2.9.3" />
    <PackageReference Include="xunit.runner.visualstudio" Version="3.1.5" />
  </ItemGroup>

  <ItemGroup>
    <Using Include="Xunit" />
  </ItemGroup>

</Project>
```

---
### `tests/WaterChem.Engine.Tests/UnitTest1.cs`
```csharp
namespace WaterChem.Engine.Tests;

public class UnitTest1
{
    [Fact]
    public void Test1()
    {

    }
}

```

---
### `tests/WaterChem.Engine.Tests/WaterChem.Engine.Tests.csproj`
```xml
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <IsPackable>false</IsPackable>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="coverlet.collector" Version="6.0.4" />
    <PackageReference Include="Microsoft.NET.Test.Sdk" Version="18.0.1" />
    <PackageReference Include="xunit" Version="2.9.3" />
    <PackageReference Include="xunit.runner.visualstudio" Version="3.1.5" />
  </ItemGroup>

  <ItemGroup>
    <Using Include="Xunit" />
  </ItemGroup>

</Project>
```

---
### `Water_Chemistry_Calculator.sln`
```solution

Microsoft Visual Studio Solution File, Format Version 12.00
# Visual Studio Version 17
VisualStudioVersion = 17.5.2.0
MinimumVisualStudioVersion = 10.0.40219.1
Project("{2150E333-8FDC-42A3-9474-1A3956D46DE8}") = "src", "src", "{827E0CD3-B72D-47B6-A68D-7590B98EB39B}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "WaterChem.Engine", "src\WaterChem.Engine\WaterChem.Engine.csproj", "{2D90C90F-ED85-6BF6-F9F1-A0CE2D9E1817}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "WaterChem.Domain", "src\WaterChem.Domain\WaterChem.Domain.csproj", "{7E1497A5-565C-413C-82C6-BF31D30E0C26}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "WaterChem.CLI", "src\WaterChem.CLI\WaterChem.CLI.csproj", "{09EB78B7-E893-429B-9F76-FBB0A2A999CC}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "WaterChem.GUI", "src\WaterChem.GUI\WaterChem.GUI.csproj", "{0705825A-873A-447C-95FA-95D2FC4FA51D}"
EndProject
Global
	GlobalSection(SolutionConfigurationPlatforms) = preSolution
		Debug|Any CPU = Debug|Any CPU
		Debug|x64 = Debug|x64
		Debug|x86 = Debug|x86
		Release|Any CPU = Release|Any CPU
		Release|x64 = Release|x64
		Release|x86 = Release|x86
	EndGlobalSection
	GlobalSection(ProjectConfigurationPlatforms) = postSolution
		{2D90C90F-ED85-6BF6-F9F1-A0CE2D9E1817}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
		{2D90C90F-ED85-6BF6-F9F1-A0CE2D9E1817}.Debug|Any CPU.Build.0 = Debug|Any CPU
		{2D90C90F-ED85-6BF6-F9F1-A0CE2D9E1817}.Debug|x64.ActiveCfg = Debug|Any CPU
		{2D90C90F-ED85-6BF6-F9F1-A0CE2D9E1817}.Debug|x64.Build.0 = Debug|Any CPU
		{2D90C90F-ED85-6BF6-F9F1-A0CE2D9E1817}.Debug|x86.ActiveCfg = Debug|Any CPU
		{2D90C90F-ED85-6BF6-F9F1-A0CE2D9E1817}.Debug|x86.Build.0 = Debug|Any CPU
		{2D90C90F-ED85-6BF6-F9F1-A0CE2D9E1817}.Release|Any CPU.ActiveCfg = Release|Any CPU
		{2D90C90F-ED85-6BF6-F9F1-A0CE2D9E1817}.Release|Any CPU.Build.0 = Release|Any CPU
		{2D90C90F-ED85-6BF6-F9F1-A0CE2D9E1817}.Release|x64.ActiveCfg = Release|Any CPU
		{2D90C90F-ED85-6BF6-F9F1-A0CE2D9E1817}.Release|x64.Build.0 = Release|Any CPU
		{2D90C90F-ED85-6BF6-F9F1-A0CE2D9E1817}.Release|x86.ActiveCfg = Release|Any CPU
		{2D90C90F-ED85-6BF6-F9F1-A0CE2D9E1817}.Release|x86.Build.0 = Release|Any CPU
		{7E1497A5-565C-413C-82C6-BF31D30E0C26}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
		{7E1497A5-565C-413C-82C6-BF31D30E0C26}.Debug|Any CPU.Build.0 = Debug|Any CPU
		{7E1497A5-565C-413C-82C6-BF31D30E0C26}.Debug|x64.ActiveCfg = Debug|Any CPU
		{7E1497A5-565C-413C-82C6-BF31D30E0C26}.Debug|x64.Build.0 = Debug|Any CPU
		{7E1497A5-565C-413C-82C6-BF31D30E0C26}.Debug|x86.ActiveCfg = Debug|Any CPU
		{7E1497A5-565C-413C-82C6-BF31D30E0C26}.Debug|x86.Build.0 = Debug|Any CPU
		{7E1497A5-565C-413C-82C6-BF31D30E0C26}.Release|Any CPU.ActiveCfg = Release|Any CPU
		{7E1497A5-565C-413C-82C6-BF31D30E0C26}.Release|Any CPU.Build.0 = Release|Any CPU
		{7E1497A5-565C-413C-82C6-BF31D30E0C26}.Release|x64.ActiveCfg = Release|Any CPU
		{7E1497A5-565C-413C-82C6-BF31D30E0C26}.Release|x64.Build.0 = Release|Any CPU
		{7E1497A5-565C-413C-82C6-BF31D30E0C26}.Release|x86.ActiveCfg = Release|Any CPU
		{7E1497A5-565C-413C-82C6-BF31D30E0C26}.Release|x86.Build.0 = Release|Any CPU
		{09EB78B7-E893-429B-9F76-FBB0A2A999CC}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
		{09EB78B7-E893-429B-9F76-FBB0A2A999CC}.Debug|Any CPU.Build.0 = Debug|Any CPU
		{09EB78B7-E893-429B-9F76-FBB0A2A999CC}.Debug|x64.ActiveCfg = Debug|Any CPU
		{09EB78B7-E893-429B-9F76-FBB0A2A999CC}.Debug|x64.Build.0 = Debug|Any CPU
		{09EB78B7-E893-429B-9F76-FBB0A2A999CC}.Debug|x86.ActiveCfg = Debug|Any CPU
		{09EB78B7-E893-429B-9F76-FBB0A2A999CC}.Debug|x86.Build.0 = Debug|Any CPU
		{09EB78B7-E893-429B-9F76-FBB0A2A999CC}.Release|Any CPU.ActiveCfg = Release|Any CPU
		{09EB78B7-E893-429B-9F76-FBB0A2A999CC}.Release|Any CPU.Build.0 = Release|Any CPU
		{09EB78B7-E893-429B-9F76-FBB0A2A999CC}.Release|x64.ActiveCfg = Release|Any CPU
		{09EB78B7-E893-429B-9F76-FBB0A2A999CC}.Release|x64.Build.0 = Release|Any CPU
		{09EB78B7-E893-429B-9F76-FBB0A2A999CC}.Release|x86.ActiveCfg = Release|Any CPU
		{09EB78B7-E893-429B-9F76-FBB0A2A999CC}.Release|x86.Build.0 = Release|Any CPU
		{0705825A-873A-447C-95FA-95D2FC4FA51D}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
		{0705825A-873A-447C-95FA-95D2FC4FA51D}.Debug|Any CPU.Build.0 = Debug|Any CPU
		{0705825A-873A-447C-95FA-95D2FC4FA51D}.Debug|x64.ActiveCfg = Debug|Any CPU
		{0705825A-873A-447C-95FA-95D2FC4FA51D}.Debug|x64.Build.0 = Debug|Any CPU
		{0705825A-873A-447C-95FA-95D2FC4FA51D}.Debug|x86.ActiveCfg = Debug|Any CPU
		{0705825A-873A-447C-95FA-95D2FC4FA51D}.Debug|x86.Build.0 = Debug|Any CPU
		{0705825A-873A-447C-95FA-95D2FC4FA51D}.Release|Any CPU.ActiveCfg = Release|Any CPU
		{0705825A-873A-447C-95FA-95D2FC4FA51D}.Release|Any CPU.Build.0 = Release|Any CPU
		{0705825A-873A-447C-95FA-95D2FC4FA51D}.Release|x64.ActiveCfg = Release|Any CPU
		{0705825A-873A-447C-95FA-95D2FC4FA51D}.Release|x64.Build.0 = Release|Any CPU
		{0705825A-873A-447C-95FA-95D2FC4FA51D}.Release|x86.ActiveCfg = Release|Any CPU
		{0705825A-873A-447C-95FA-95D2FC4FA51D}.Release|x86.Build.0 = Release|Any CPU
	EndGlobalSection
	GlobalSection(SolutionProperties) = preSolution
		HideSolutionNode = FALSE
	EndGlobalSection
	GlobalSection(NestedProjects) = preSolution
		{2D90C90F-ED85-6BF6-F9F1-A0CE2D9E1817} = {827E0CD3-B72D-47B6-A68D-7590B98EB39B}
		{7E1497A5-565C-413C-82C6-BF31D30E0C26} = {827E0CD3-B72D-47B6-A68D-7590B98EB39B}
		{09EB78B7-E893-429B-9F76-FBB0A2A999CC} = {827E0CD3-B72D-47B6-A68D-7590B98EB39B}
		{0705825A-873A-447C-95FA-95D2FC4FA51D} = {827E0CD3-B72D-47B6-A68D-7590B98EB39B}
	EndGlobalSection
	GlobalSection(ExtensibilityGlobals) = postSolution
		SolutionGuid = {5FD0D6C7-1C1D-4525-837D-F907F5021B56}
	EndGlobalSection
EndGlobal

```
